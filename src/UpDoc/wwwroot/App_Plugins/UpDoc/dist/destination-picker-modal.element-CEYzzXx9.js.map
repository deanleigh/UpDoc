{"version":3,"file":"destination-picker-modal.element-CEYzzXx9.js","sources":["../src/destination-picker-modal.element.ts"],"sourcesContent":["import type { DestinationConfig, DestinationField, DestinationBlockGrid } from './workflow.types.js';\r\nimport type { DestinationPickerModalData, DestinationPickerModalValue } from './destination-picker-modal.token.js';\r\nimport { html, css, state, nothing, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n@customElement('up-doc-destination-picker-modal')\r\nexport class UpDocDestinationPickerModalElement extends UmbModalBaseElement<\r\n\tDestinationPickerModalData,\r\n\tDestinationPickerModalValue\r\n> {\r\n\t@state() private _activeTab = '';\r\n\t@state() private _selectedTargets = new Map<string, { target: string; blockKey?: string }>();\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tconst tabs = this.#getTabs();\r\n\t\tif (tabs.length > 0) {\r\n\t\t\tthis._activeTab = tabs[0].id;\r\n\t\t}\r\n\t}\r\n\r\n\tget #destination(): DestinationConfig | undefined {\r\n\t\treturn this.data?.destination;\r\n\t}\r\n\r\n\t#getTabs(): Array<{ id: string; label: string }> {\r\n\t\tif (!this.#destination) return [];\r\n\r\n\t\tconst tabs: Array<{ id: string; label: string }> = [];\r\n\t\tconst tabNames = new Set(this.#destination.fields.map((f) => f.tab).filter(Boolean));\r\n\r\n\t\tfor (const tabName of tabNames) {\r\n\t\t\ttabs.push({\r\n\t\t\t\tid: tabName!.toLowerCase().replace(/\\s+/g, '-'),\r\n\t\t\t\tlabel: tabName!,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.#destination.blockGrids?.length) {\r\n\t\t\tif (!tabNames.has('Page Content')) {\r\n\t\t\t\ttabs.push({ id: 'page-content', label: 'Page Content' });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn tabs;\r\n\t}\r\n\r\n\t#makeKey(alias: string, blockKey?: string): string {\r\n\t\treturn blockKey ? `${blockKey}:${alias}` : alias;\r\n\t}\r\n\r\n\t#toggleTarget(alias: string, blockKey?: string) {\r\n\t\tconst key = this.#makeKey(alias, blockKey);\r\n\t\tconst next = new Map(this._selectedTargets);\r\n\t\tif (next.has(key)) {\r\n\t\t\tnext.delete(key);\r\n\t\t} else {\r\n\t\t\tnext.set(key, { target: alias, blockKey });\r\n\t\t}\r\n\t\tthis._selectedTargets = next;\r\n\t}\r\n\r\n\t#onConfirm() {\r\n\t\tthis.value = { selectedTargets: Array.from(this._selectedTargets.values()) };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#onCancel() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\t#renderField(field: DestinationField) {\r\n\t\tconst checked = this._selectedTargets.has(field.alias);\r\n\t\treturn html`\r\n\t\t\t<div class=\"field-item ${checked ? 'field-selected' : ''}\" @click=${() => this.#toggleTarget(field.alias)}>\r\n\t\t\t\t<uui-checkbox\r\n\t\t\t\t\tlabel=\"Select ${field.label}\"\r\n\t\t\t\t\t?checked=${checked}\r\n\t\t\t\t\t@click=${(e: Event) => e.stopPropagation()}\r\n\t\t\t\t\t@change=${() => this.#toggleTarget(field.alias)}>\r\n\t\t\t\t</uui-checkbox>\r\n\t\t\t\t<div class=\"field-info\">\r\n\t\t\t\t\t<span class=\"field-label\">${field.label}</span>\r\n\t\t\t\t\t<span class=\"field-type\">${field.type}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderFieldsForTab(tabName: string) {\r\n\t\tif (!this.#destination) return nothing;\r\n\r\n\t\tconst fields = this.#destination.fields.filter((f) => f.tab === tabName);\r\n\t\tif (fields.length === 0) return html`<p class=\"empty-message\">No fields in this tab.</p>`;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"field-list\">\r\n\t\t\t\t${fields.map((field) => this.#renderField(field))}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderBlockGrids() {\r\n\t\tif (!this.#destination?.blockGrids?.length) {\r\n\t\t\treturn html`<p class=\"empty-message\">No block grids configured.</p>`;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t${this.#destination.blockGrids.map((grid) => this.#renderBlockGrid(grid))}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderBlockGrid(grid: DestinationBlockGrid) {\r\n\t\treturn html`\r\n\t\t\t<div class=\"block-grid\">\r\n\t\t\t\t<div class=\"block-grid-header\">\r\n\t\t\t\t\t<span class=\"block-grid-label\">${grid.label}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"block-list\">\r\n\t\t\t\t\t${grid.blocks.map(\r\n\t\t\t\t\t\t(block) => html`\r\n\t\t\t\t\t\t\t<div class=\"block-item\">\r\n\t\t\t\t\t\t\t\t<div class=\"block-header\">\r\n\t\t\t\t\t\t\t\t\t<umb-icon name=\"icon-box\"></umb-icon>\r\n\t\t\t\t\t\t\t\t\t<span class=\"block-label\">${block.label}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t${block.properties?.length\r\n\t\t\t\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"block-properties\">\r\n\t\t\t\t\t\t\t\t\t\t\t${block.properties.map((prop) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst compoundKey = this.#makeKey(prop.alias, block.key);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst checked = this._selectedTargets.has(compoundKey);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"block-property ${checked ? 'field-selected' : ''}\" @click=${() => this.#toggleTarget(prop.alias, block.key)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uui-checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Select ${prop.label || prop.alias}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?checked=${checked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=${(e: Event) => e.stopPropagation()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@change=${() => this.#toggleTarget(prop.alias, block.key)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</uui-checkbox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"block-property-label\">${prop.label || prop.alias}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"field-type\">${prop.type}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t: nothing}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderTabContent() {\r\n\t\tif (!this.#destination) return nothing;\r\n\r\n\t\tif (this._activeTab === 'page-content') {\r\n\t\t\treturn this.#renderBlockGrids();\r\n\t\t}\r\n\r\n\t\tconst tabName = this.#destination.fields.find(\r\n\t\t\t(f) => f.tab && f.tab.toLowerCase().replace(/\\s+/g, '-') === this._activeTab\r\n\t\t)?.tab;\r\n\r\n\t\tif (tabName) {\r\n\t\t\treturn this.#renderFieldsForTab(tabName);\r\n\t\t}\r\n\r\n\t\treturn nothing;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst tabs = this.#getTabs();\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Pick destination field(s)\">\r\n\t\t\t\t<uui-tab-group slot=\"header\" dropdown-content-direction=\"vertical\">\r\n\t\t\t\t\t${tabs.map(\r\n\t\t\t\t\t\t(tab) => html`\r\n\t\t\t\t\t\t\t<uui-tab\r\n\t\t\t\t\t\t\t\tlabel=${tab.label}\r\n\t\t\t\t\t\t\t\t?active=${this._activeTab === tab.id}\r\n\t\t\t\t\t\t\t\t@click=${() => { this._activeTab = tab.id; }}>\r\n\t\t\t\t\t\t\t\t${tab.label}\r\n\t\t\t\t\t\t\t</uui-tab>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t)}\r\n\t\t\t\t</uui-tab-group>\r\n\r\n\t\t\t\t<uui-box>\r\n\t\t\t\t\t${this.#renderTabContent()}\r\n\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button label=\"Cancel\" @click=${this.#onCancel}>Cancel</uui-button>\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\t\tlabel=\"Confirm\"\r\n\t\t\t\t\t\t?disabled=${this._selectedTargets.size === 0}\r\n\t\t\t\t\t\t@click=${this.#onConfirm}>\r\n\t\t\t\t\t\tMap to ${this._selectedTargets.size} field${this._selectedTargets.size !== 1 ? 's' : ''}\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\t--uui-tab-background: var(--uui-color-surface);\r\n\t\t\t}\r\n\r\n\t\t\t.empty-message {\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tpadding: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.field-list {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t.field-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t}\r\n\r\n\t\t\t.field-item:hover {\r\n\t\t\t\tbackground: var(--uui-color-surface-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t.field-item.field-selected {\r\n\t\t\t\tbackground: var(--uui-color-selected);\r\n\t\t\t}\r\n\r\n\t\t\t.field-item:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t.field-info {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\t.field-label {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.field-type {\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t\tbackground: var(--uui-color-surface-alt);\r\n\t\t\t\tpadding: 2px 8px;\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\r\n\t\t\t.block-grid {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\t.block-grid-header {\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t\tbackground: var(--uui-color-surface-alt);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.block-grid-label {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.block-list {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t.block-item {\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t\tpadding-left: var(--uui-size-space-6);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.block-item:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t.block-header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t.block-label {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.block-properties {\r\n\t\t\t\tpadding-left: var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\t.block-property {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tpadding: var(--uui-size-space-2) var(--uui-size-space-3);\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\r\n\t\t\t.block-property:hover {\r\n\t\t\t\tbackground: var(--uui-color-surface-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t.block-property.field-selected {\r\n\t\t\t\tbackground: var(--uui-color-selected);\r\n\t\t\t}\r\n\r\n\t\t\t.block-property-label {\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UpDocDestinationPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'up-doc-destination-picker-modal': UpDocDestinationPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_UpDocDestinationPickerModalElement_instances","destination_get","getTabs_fn","makeKey_fn","toggleTarget_fn","onConfirm_fn","onCancel_fn","renderField_fn","renderFieldsForTab_fn","renderBlockGrids_fn","renderBlockGrid_fn","renderTabContent_fn","UpDocDestinationPickerModalElement","UmbModalBaseElement","__privateAdd","tabs","__privateMethod","html","tab","__privateGet","tabNames","f","tabName","alias","blockKey","key","next","field","checked","e","nothing","fields","grid","block","prop","compoundKey","UmbTextStyles","css","__decorateClass","state","customElement","UpDocDestinationPickerModalElement_default"],"mappings":"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"}