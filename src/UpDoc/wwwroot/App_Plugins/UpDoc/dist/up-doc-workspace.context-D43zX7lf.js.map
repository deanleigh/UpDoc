{"version":3,"file":"up-doc-workspace.context-D43zX7lf.js","sources":["../src/up-doc-workspace.context.ts"],"sourcesContent":["import { UmbWorkspaceRouteManager, UMB_WORKSPACE_CONTEXT } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbObjectState } from '@umbraco-cms/backoffice/observable-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { LitElement, html } from '@umbraco-cms/backoffice/external/lit';\r\nimport { customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UPDOC_ENTITY_TYPE } from './up-doc-tree.repository.js';\r\n\r\n@customElement('up-doc-workspace-editor')\r\nclass UpDocWorkspaceEditorElement extends LitElement {\r\n\toverride render() {\r\n\t\treturn html`<umb-workspace-editor></umb-workspace-editor>`;\r\n\t}\r\n}\r\n\r\ninterface UpDocWorkspaceData {\r\n\tunique: string;\r\n\tname?: string;\r\n}\r\n\r\nexport class UpDocWorkspaceContext extends UmbContextBase {\r\n\tpublic readonly workspaceAlias = 'UpDoc.Workspace';\r\n\r\n\t#data = new UmbObjectState<UpDocWorkspaceData | undefined>(undefined);\r\n\treadonly data = this.#data.asObservable();\r\n\treadonly unique = this.#data.asObservablePart((data) => data?.unique);\r\n\treadonly name = this.#data.asObservablePart((data) => data?.name);\r\n\r\n\treadonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_WORKSPACE_CONTEXT);\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UpDocWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component: HTMLElement, info: any) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tasync load(unique: string) {\r\n\t\tthis.#data.setValue({ unique, name: 'UpDoc' });\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this.#data.getValue()?.unique;\r\n\t}\r\n\r\n\tgetEntityType() {\r\n\t\treturn UPDOC_ENTITY_TYPE;\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tthis.#data.destroy();\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nexport { UpDocWorkspaceContext as api };\r\n"],"names":["UpDocWorkspaceEditorElement","LitElement","html","__decorateClass","customElement","UpDocWorkspaceContext","UmbContextBase","host","UMB_WORKSPACE_CONTEXT","#data","UmbObjectState","data","UmbWorkspaceRouteManager","_component","info","unique","UPDOC_ENTITY_TYPE"],"mappings":";;;;;;;;;;AASA,IAAMA,IAAN,cAA0CC,EAAW;AAAA,EAC3C,SAAS;AACjB,WAAOC;AAAA,EACR;AACD;AAJMF,IAANG,EAAA;AAAA,EADCC,EAAc,yBAAyB;AAAA,GAClCJ,CAAA;AAWC,MAAMK,UAA8BC,EAAe;AAAA,EAUzD,YAAYC,GAAyB;AACpC,UAAMA,GAAMC,CAAqB,GAVlC,KAAgB,iBAAiB,mBAEjC,KAAAC,KAAQ,IAAIC,EAA+C,MAAS,GACpE,KAAS,OAAO,KAAKD,GAAM,aAAA,GAC3B,KAAS,SAAS,KAAKA,GAAM,iBAAiB,CAACE,MAASA,GAAM,MAAM,GACpE,KAAS,OAAO,KAAKF,GAAM,iBAAiB,CAACE,MAASA,GAAM,IAAI,GAEhE,KAAS,SAAS,IAAIC,EAAyB,IAAI,GAKlD,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWZ;AAAA,QACX,OAAO,CAACa,GAAyBC,MAAc;AAC9C,gBAAMC,IAASD,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKC,CAAM;AAAA,QACjB;AAAA,MAAA;AAAA,IACD,CACA;AAAA,EACF;AAAA,EApBAN;AAAA,EAsBA,MAAM,KAAKM,GAAgB;AAC1B,SAAKN,GAAM,SAAS,EAAE,QAAAM,GAAQ,MAAM,SAAS;AAAA,EAC9C;AAAA,EAEA,YAAY;AACX,WAAO,KAAKN,GAAM,SAAA,GAAY;AAAA,EAC/B;AAAA,EAEA,gBAAgB;AACf,WAAOO;AAAA,EACR;AAAA,EAEgB,UAAgB;AAC/B,SAAKP,GAAM,QAAA,GACX,MAAM,QAAA;AAAA,EACP;AACD;"}