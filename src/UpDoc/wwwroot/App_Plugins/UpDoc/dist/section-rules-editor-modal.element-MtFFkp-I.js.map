{"version":3,"file":"section-rules-editor-modal.element-MtFFkp-I.js","sources":["../src/section-rules-editor-modal.element.ts"],"sourcesContent":["import type { SectionRulesEditorModalData, SectionRulesEditorModalValue } from './section-rules-editor-modal.token.js';\r\nimport type { SectionRule, RuleCondition, RuleConditionType, AreaElement } from './workflow.types.js';\r\nimport { html, css, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n/** Friendly labels for condition types */\r\nconst CONDITION_LABELS: Record<RuleConditionType, string> = {\r\n\ttextBeginsWith: 'Text begins with',\r\n\ttextEndsWith: 'Text ends with',\r\n\ttextContains: 'Text contains',\r\n\ttextMatchesPattern: 'Text matches pattern',\r\n\tfontSizeEquals: 'Font size equals',\r\n\tfontSizeAbove: 'Font size above',\r\n\tfontSizeBelow: 'Font size below',\r\n\tfontNameContains: 'Font name contains',\r\n\tcolorEquals: 'Color equals',\r\n\tpositionFirst: 'Position: first',\r\n\tpositionLast: 'Position: last',\r\n};\r\n\r\n/** Condition types that don't need a value input */\r\nconst VALUELESS_CONDITIONS: RuleConditionType[] = ['positionFirst', 'positionLast'];\r\n\r\n/** All available condition types */\r\nconst ALL_CONDITION_TYPES: RuleConditionType[] = [\r\n\t'textBeginsWith', 'textEndsWith', 'textContains', 'textMatchesPattern',\r\n\t'fontSizeEquals', 'fontSizeAbove', 'fontSizeBelow',\r\n\t'fontNameContains', 'colorEquals',\r\n\t'positionFirst', 'positionLast',\r\n];\r\n\r\n@customElement('up-doc-section-rules-editor-modal')\r\nexport class UpDocSectionRulesEditorModalElement extends UmbModalBaseElement<SectionRulesEditorModalData, SectionRulesEditorModalValue> {\r\n\t@state() private _rules: SectionRule[] = [];\r\n\r\n\toverride firstUpdated() {\r\n\t\t// Deep clone existing rules so edits don't mutate the original\r\n\t\tif (this.data?.existingRules?.rules?.length) {\r\n\t\t\tthis._rules = JSON.parse(JSON.stringify(this.data.existingRules.rules));\r\n\t\t}\r\n\t}\r\n\r\n\tget #elements(): AreaElement[] {\r\n\t\treturn this.data?.elements ?? [];\r\n\t}\r\n\r\n\tget #sectionHeading(): string {\r\n\t\treturn this.data?.sectionHeading ?? 'Section';\r\n\t}\r\n\r\n\t// ===== Rule evaluation (first-match-wins) =====\r\n\r\n\t/** Evaluate all rules against elements. Returns a map of elementId -> ruleIndex */\r\n\t#evaluateRules(): Map<string, number> {\r\n\t\tconst claimed = new Map<string, number>();\r\n\t\tconst elements = this.#elements;\r\n\r\n\t\tfor (let ruleIdx = 0; ruleIdx < this._rules.length; ruleIdx++) {\r\n\t\t\tconst rule = this._rules[ruleIdx];\r\n\t\t\tif (rule.conditions.length === 0) continue;\r\n\r\n\t\t\tfor (let elIdx = 0; elIdx < elements.length; elIdx++) {\r\n\t\t\t\tconst el = elements[elIdx];\r\n\t\t\t\tif (claimed.has(el.id)) continue; // already claimed\r\n\r\n\t\t\t\tif (this.#elementMatchesAllConditions(el, rule.conditions, elIdx, elements.length)) {\r\n\t\t\t\t\tclaimed.set(el.id, ruleIdx);\r\n\t\t\t\t\tbreak; // first match only per rule\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn claimed;\r\n\t}\r\n\r\n\t#elementMatchesAllConditions(el: AreaElement, conditions: RuleCondition[], index: number, total: number): boolean {\r\n\t\treturn conditions.every((c) => this.#elementMatchesCondition(el, c, index, total));\r\n\t}\r\n\r\n\t#elementMatchesCondition(el: AreaElement, condition: RuleCondition, index: number, total: number): boolean {\r\n\t\tconst val = String(condition.value ?? '');\r\n\t\tconst numVal = Number(condition.value);\r\n\r\n\t\tswitch (condition.type) {\r\n\t\t\tcase 'textBeginsWith':\r\n\t\t\t\treturn el.text.toLowerCase().startsWith(val.toLowerCase());\r\n\t\t\tcase 'textEndsWith':\r\n\t\t\t\treturn el.text.toLowerCase().endsWith(val.toLowerCase());\r\n\t\t\tcase 'textContains':\r\n\t\t\t\treturn el.text.toLowerCase().includes(val.toLowerCase());\r\n\t\t\tcase 'textMatchesPattern':\r\n\t\t\t\ttry { return new RegExp(val, 'i').test(el.text); } catch { return false; }\r\n\t\t\tcase 'fontSizeEquals':\r\n\t\t\t\treturn !isNaN(numVal) && Math.abs(el.fontSize - numVal) < 0.5;\r\n\t\t\tcase 'fontSizeAbove':\r\n\t\t\t\treturn !isNaN(numVal) && el.fontSize > numVal;\r\n\t\t\tcase 'fontSizeBelow':\r\n\t\t\t\treturn !isNaN(numVal) && el.fontSize < numVal;\r\n\t\t\tcase 'fontNameContains':\r\n\t\t\t\treturn el.fontName.toLowerCase().includes(val.toLowerCase());\r\n\t\t\tcase 'colorEquals':\r\n\t\t\t\treturn el.color.toLowerCase() === val.toLowerCase();\r\n\t\t\tcase 'positionFirst':\r\n\t\t\t\treturn index === 0;\r\n\t\t\tcase 'positionLast':\r\n\t\t\t\treturn index === total - 1;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t// ===== Auto-populate conditions from an element =====\r\n\r\n\t#autoPopulateConditions(el: AreaElement, elIndex: number, total: number): RuleCondition[] {\r\n\t\tconst conditions: RuleCondition[] = [];\r\n\r\n\t\t// Font size\r\n\t\tconditions.push({ type: 'fontSizeEquals', value: el.fontSize });\r\n\r\n\t\t// Font name\r\n\t\tif (el.fontName) {\r\n\t\t\tconditions.push({ type: 'fontNameContains', value: el.fontName });\r\n\t\t}\r\n\r\n\t\t// Color (skip black/very dark as it's the default)\r\n\t\tif (el.color && el.color.toLowerCase() !== '#000000' && el.color.toLowerCase() !== '#000') {\r\n\t\t\tconditions.push({ type: 'colorEquals', value: el.color });\r\n\t\t}\r\n\r\n\t\t// Text prefix â€” if text contains a colon, use \"begins with\" up to the colon\r\n\t\tconst colonIdx = el.text.indexOf(':');\r\n\t\tif (colonIdx > 0 && colonIdx < 30) {\r\n\t\t\tconditions.push({ type: 'textBeginsWith', value: el.text.substring(0, colonIdx + 1) });\r\n\t\t}\r\n\r\n\t\t// Position\r\n\t\tif (elIndex === 0) {\r\n\t\t\tconditions.push({ type: 'positionFirst' });\r\n\t\t} else if (elIndex === total - 1) {\r\n\t\t\tconditions.push({ type: 'positionLast' });\r\n\t\t}\r\n\r\n\t\treturn conditions;\r\n\t}\r\n\r\n\t// ===== Rule CRUD =====\r\n\r\n\t#addRule() {\r\n\t\tthis._rules = [...this._rules, { role: '', conditions: [] }];\r\n\t}\r\n\r\n\t#removeRule(ruleIdx: number) {\r\n\t\tthis._rules = this._rules.filter((_, i) => i !== ruleIdx);\r\n\t}\r\n\r\n\t#createRuleFromElement(el: AreaElement, elIndex: number) {\r\n\t\tconst conditions = this.#autoPopulateConditions(el, elIndex, this.#elements.length);\r\n\t\t// Derive a role name suggestion from text (kebab-case first few words)\r\n\t\tconst roleSuggestion = el.text\r\n\t\t\t.split(/[\\s:,]+/)\r\n\t\t\t.slice(0, 3)\r\n\t\t\t.join('-')\r\n\t\t\t.toLowerCase()\r\n\t\t\t.replace(/[^a-z0-9-]/g, '');\r\n\t\tthis._rules = [...this._rules, { role: roleSuggestion, conditions }];\r\n\t}\r\n\r\n\t#updateRoleName(ruleIdx: number, value: string) {\r\n\t\tconst updated = [...this._rules];\r\n\t\tupdated[ruleIdx] = { ...updated[ruleIdx], role: value };\r\n\t\tthis._rules = updated;\r\n\t}\r\n\r\n\t#addCondition(ruleIdx: number) {\r\n\t\tconst updated = [...this._rules];\r\n\t\tconst rule = { ...updated[ruleIdx] };\r\n\t\trule.conditions = [...rule.conditions, { type: 'textBeginsWith', value: '' }];\r\n\t\tupdated[ruleIdx] = rule;\r\n\t\tthis._rules = updated;\r\n\t}\r\n\r\n\t#removeCondition(ruleIdx: number, condIdx: number) {\r\n\t\tconst updated = [...this._rules];\r\n\t\tconst rule = { ...updated[ruleIdx] };\r\n\t\trule.conditions = rule.conditions.filter((_, i) => i !== condIdx);\r\n\t\tupdated[ruleIdx] = rule;\r\n\t\tthis._rules = updated;\r\n\t}\r\n\r\n\t#updateConditionType(ruleIdx: number, condIdx: number, type: RuleConditionType) {\r\n\t\tconst updated = [...this._rules];\r\n\t\tconst rule = { ...updated[ruleIdx] };\r\n\t\trule.conditions = [...rule.conditions];\r\n\t\trule.conditions[condIdx] = {\r\n\t\t\ttype,\r\n\t\t\tvalue: VALUELESS_CONDITIONS.includes(type) ? undefined : rule.conditions[condIdx].value,\r\n\t\t};\r\n\t\tupdated[ruleIdx] = rule;\r\n\t\tthis._rules = updated;\r\n\t}\r\n\r\n\t#updateConditionValue(ruleIdx: number, condIdx: number, value: string) {\r\n\t\tconst updated = [...this._rules];\r\n\t\tconst rule = { ...updated[ruleIdx] };\r\n\t\trule.conditions = [...rule.conditions];\r\n\t\tconst cond = rule.conditions[condIdx];\r\n\t\t// Store as number for font size conditions\r\n\t\tconst isNumeric = cond.type === 'fontSizeEquals' || cond.type === 'fontSizeAbove' || cond.type === 'fontSizeBelow';\r\n\t\trule.conditions[condIdx] = { ...cond, value: isNumeric && !isNaN(Number(value)) ? Number(value) : value };\r\n\t\tupdated[ruleIdx] = rule;\r\n\t\tthis._rules = updated;\r\n\t}\r\n\r\n\t// ===== Submit =====\r\n\r\n\t#onSubmit() {\r\n\t\tthis.value = { rules: { rules: this._rules } };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#onClose() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\t// ===== Rendering =====\r\n\r\n\t#renderConditionRow(ruleIdx: number, condIdx: number, condition: RuleCondition) {\r\n\t\tconst isValueless = VALUELESS_CONDITIONS.includes(condition.type);\r\n\t\treturn html`\r\n\t\t\t<div class=\"condition-row\">\r\n\t\t\t\t<select\r\n\t\t\t\t\tclass=\"condition-type-select\"\r\n\t\t\t\t\t.value=${condition.type}\r\n\t\t\t\t\t@change=${(e: Event) => this.#updateConditionType(ruleIdx, condIdx, (e.target as HTMLSelectElement).value as RuleConditionType)}>\r\n\t\t\t\t\t${ALL_CONDITION_TYPES.map((t) => html`\r\n\t\t\t\t\t\t<option value=${t} ?selected=${t === condition.type}>${CONDITION_LABELS[t]}</option>\r\n\t\t\t\t\t`)}\r\n\t\t\t\t</select>\r\n\t\t\t\t${isValueless ? nothing : html`\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclass=\"condition-value-input\"\r\n\t\t\t\t\t\tplaceholder=\"Value...\"\r\n\t\t\t\t\t\t.value=${String(condition.value ?? '')}\r\n\t\t\t\t\t\t@input=${(e: Event) => this.#updateConditionValue(ruleIdx, condIdx, (e.target as HTMLInputElement).value)} />\r\n\t\t\t\t`}\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tcompact\r\n\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\tlabel=\"Remove condition\"\r\n\t\t\t\t\t@click=${() => this.#removeCondition(ruleIdx, condIdx)}>\r\n\t\t\t\t\t<uui-icon name=\"icon-trash\"></uui-icon>\r\n\t\t\t\t</uui-button>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderRuleCard(rule: SectionRule, ruleIdx: number, matchedElement: AreaElement | null) {\r\n\t\treturn html`\r\n\t\t\t<div class=\"rule-card\">\r\n\t\t\t\t<div class=\"rule-header\">\r\n\t\t\t\t\t<span class=\"rule-number\">${ruleIdx + 1}</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclass=\"role-name-input\"\r\n\t\t\t\t\t\tplaceholder=\"Role name (e.g. organiser-name)\"\r\n\t\t\t\t\t\t.value=${rule.role}\r\n\t\t\t\t\t\t@input=${(e: Event) => this.#updateRoleName(ruleIdx, (e.target as HTMLInputElement).value)} />\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\tcolor=\"danger\"\r\n\t\t\t\t\t\tlabel=\"Remove rule\"\r\n\t\t\t\t\t\t@click=${() => this.#removeRule(ruleIdx)}>\r\n\t\t\t\t\t\t<uui-icon name=\"icon-trash\"></uui-icon>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"conditions-area\">\r\n\t\t\t\t\t${rule.conditions.map((cond, cIdx) => this.#renderConditionRow(ruleIdx, cIdx, cond))}\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t\tlabel=\"Add condition\"\r\n\t\t\t\t\t\t@click=${() => this.#addCondition(ruleIdx)}>\r\n\t\t\t\t\t\t+ Add condition\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"match-preview ${matchedElement ? 'matched' : 'no-match'}\">\r\n\t\t\t\t\t${matchedElement\r\n\t\t\t\t\t\t? html`<uui-icon name=\"icon-check\"></uui-icon> Matched: <strong>${this.#truncate(matchedElement.text, 60)}</strong>`\r\n\t\t\t\t\t\t: html`<uui-icon name=\"icon-alert\"></uui-icon> ${rule.conditions.length === 0 ? 'Add conditions to match elements' : 'No match'}`}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#truncate(text: string, max: number): string {\r\n\t\treturn text.length > max ? text.substring(0, max) + '...' : text;\r\n\t}\r\n\r\n\t#renderUnmatchedElements(claimed: Map<string, number>) {\r\n\t\tconst elements = this.#elements;\r\n\t\tconst unmatched = elements.filter((el) => !claimed.has(el.id));\r\n\t\tif (unmatched.length === 0) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"unmatched-section\">\r\n\t\t\t\t<h4>Unmatched elements (${unmatched.length})</h4>\r\n\t\t\t\t${unmatched.map((el) => {\r\n\t\t\t\t\tconst elIndex = elements.indexOf(el);\r\n\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t<div class=\"unmatched-element\">\r\n\t\t\t\t\t\t\t<div class=\"unmatched-text\">${this.#truncate(el.text, 80)}</div>\r\n\t\t\t\t\t\t\t<div class=\"unmatched-meta\">\r\n\t\t\t\t\t\t\t\t<span class=\"meta-badge\">${el.fontSize}pt</span>\r\n\t\t\t\t\t\t\t\t<span class=\"meta-badge\">${el.fontName}</span>\r\n\t\t\t\t\t\t\t\t${el.color !== '#000000' ? html`<span class=\"meta-badge\" style=\"border-left: 3px solid ${el.color};\">${el.color}</span>` : nothing}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\tlook=\"outline\"\r\n\t\t\t\t\t\t\t\tlabel=\"Create rule from this\"\r\n\t\t\t\t\t\t\t\t@click=${() => this.#createRuleFromElement(el, elIndex)}>\r\n\t\t\t\t\t\t\t\tCreate rule\r\n\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst claimed = this.#evaluateRules();\r\n\r\n\t\t// Build ruleIdx -> matched element lookup\r\n\t\tconst ruleMatches = new Map<number, AreaElement>();\r\n\t\tfor (const [elId, ruleIdx] of claimed) {\r\n\t\t\tif (!ruleMatches.has(ruleIdx)) {\r\n\t\t\t\tconst el = this.#elements.find((e) => e.id === elId);\r\n\t\t\t\tif (el) ruleMatches.set(ruleIdx, el);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Edit Sections: ${this.#sectionHeading}\">\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t<div class=\"section-info\">\r\n\t\t\t\t\t\t<span class=\"meta-badge\">${this.#elements.length} elements</span>\r\n\t\t\t\t\t\t<span class=\"meta-badge\">${this._rules.length} rules</span>\r\n\t\t\t\t\t\t<span class=\"meta-badge\">${claimed.size} matched</span>\r\n\t\t\t\t\t\t<span class=\"meta-badge\">${this.#elements.length - claimed.size} unmatched</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t${this._rules.map((rule, idx) => this.#renderRuleCard(rule, idx, ruleMatches.get(idx) ?? null))}\r\n\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t\tlabel=\"Add rule\"\r\n\t\t\t\t\t\t@click=${this.#addRule}>\r\n\t\t\t\t\t\t+ Add another rule\r\n\t\t\t\t\t</uui-button>\r\n\r\n\t\t\t\t\t${this.#renderUnmatchedElements(claimed)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button label=\"Close\" @click=${this.#onClose}>Close</uui-button>\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlabel=\"Save\"\r\n\t\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\t\t@click=${this.#onSubmit}>\r\n\t\t\t\t\t\tSave\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#main {\r\n\t\t\t\tpadding: var(--uui-size-space-4);\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.section-info {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t}\r\n\r\n\t\t\t.meta-badge {\r\n\t\t\t\tfont-size: 11px;\r\n\t\t\t\tfont-family: monospace;\r\n\t\t\t\tpadding: 1px 6px;\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbackground: var(--uui-color-surface-alt);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\r\n\t\t\t/* Rule cards */\r\n\t\t\t.rule-card {\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\r\n\t\t\t.rule-header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t\tbackground: var(--uui-color-surface-alt);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.rule-number {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\twidth: 24px;\r\n\t\t\t\theight: 24px;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tbackground: var(--uui-color-default-emphasis);\r\n\t\t\t\tcolor: var(--uui-color-default-contrast);\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tfont-weight: 700;\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.role-name-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tpadding: var(--uui-size-space-1) var(--uui-size-space-2);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: var(--uui-type-default-size);\r\n\t\t\t\tfont-family: monospace;\r\n\t\t\t\tbackground: var(--uui-color-surface);\r\n\t\t\t\tcolor: var(--uui-color-text);\r\n\t\t\t}\r\n\r\n\t\t\t.role-name-input:focus {\r\n\t\t\t\toutline: none;\r\n\t\t\t\tborder-color: var(--uui-color-focus);\r\n\t\t\t}\r\n\r\n\t\t\t/* Conditions */\r\n\t\t\t.conditions-area {\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t.condition-row {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t.condition-type-select {\r\n\t\t\t\tmin-width: 180px;\r\n\t\t\t\tpadding: var(--uui-size-space-1) var(--uui-size-space-2);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tbackground: var(--uui-color-surface);\r\n\t\t\t\tcolor: var(--uui-color-text);\r\n\t\t\t}\r\n\r\n\t\t\t.condition-type-select:focus {\r\n\t\t\t\toutline: none;\r\n\t\t\t\tborder-color: var(--uui-color-focus);\r\n\t\t\t}\r\n\r\n\t\t\t.condition-value-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tpadding: var(--uui-size-space-1) var(--uui-size-space-2);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tfont-family: monospace;\r\n\t\t\t\tbackground: var(--uui-color-surface);\r\n\t\t\t\tcolor: var(--uui-color-text);\r\n\t\t\t}\r\n\r\n\t\t\t.condition-value-input:focus {\r\n\t\t\t\toutline: none;\r\n\t\t\t\tborder-color: var(--uui-color-focus);\r\n\t\t\t}\r\n\r\n\t\t\t/* Match preview */\r\n\t\t\t.match-preview {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tpadding: var(--uui-size-space-2) var(--uui-size-space-4);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tborder-top: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.match-preview.matched {\r\n\t\t\t\tbackground: color-mix(in srgb, var(--uui-color-positive) 10%, transparent);\r\n\t\t\t\tcolor: var(--uui-color-positive-standalone);\r\n\t\t\t}\r\n\r\n\t\t\t.match-preview.no-match {\r\n\t\t\t\tbackground: color-mix(in srgb, var(--uui-color-warning) 10%, transparent);\r\n\t\t\t\tcolor: var(--uui-color-warning-standalone);\r\n\t\t\t}\r\n\r\n\t\t\t.match-preview strong {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t/* Unmatched elements */\r\n\t\t\t.unmatched-section {\r\n\t\t\t\tborder: 1px dashed var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.unmatched-section h4 {\r\n\t\t\t\tmargin: 0 0 var(--uui-size-space-3);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\ttext-transform: uppercase;\r\n\t\t\t\tletter-spacing: 0.5px;\r\n\t\t\t}\r\n\r\n\t\t\t.unmatched-element {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-2) 0;\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.unmatched-element:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t.unmatched-text {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tmin-width: 0;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\r\n\t\t\t.unmatched-meta {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-space-1);\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UpDocSectionRulesEditorModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'up-doc-section-rules-editor-modal': UpDocSectionRulesEditorModalElement;\r\n\t}\r\n}\r\n"],"names":["_UpDocSectionRulesEditorModalElement_instances","elements_get","sectionHeading_get","evaluateRules_fn","elementMatchesAllConditions_fn","elementMatchesCondition_fn","autoPopulateConditions_fn","addRule_fn","removeRule_fn","createRuleFromElement_fn","updateRoleName_fn","addCondition_fn","removeCondition_fn","updateConditionType_fn","updateConditionValue_fn","onSubmit_fn","onClose_fn","renderConditionRow_fn","renderRuleCard_fn","truncate_fn","renderUnmatchedElements_fn","CONDITION_LABELS","VALUELESS_CONDITIONS","ALL_CONDITION_TYPES","UpDocSectionRulesEditorModalElement","UmbModalBaseElement","__privateAdd","claimed","__privateMethod","ruleMatches","elId","ruleIdx","el","__privateGet","e","html","rule","idx","elements","elIdx","conditions","index","total","c","condition","val","numVal","elIndex","colonIdx","_","roleSuggestion","value","updated","condIdx","i","type","cond","isNumeric","isValueless","t","nothing","matchedElement","cIdx","text","max","unmatched","UmbTextStyles","css","__decorateClass","state","customElement","UpDocSectionRulesEditorModalElement_default"],"mappings":"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"}