{"version":3,"file":"create-workflow-sidebar.element-XPCSn6Rq.js","sources":["../src/up-doc-pdf-thumbnail.element.ts","../src/up-doc-pdf-picker.element.ts","../src/create-workflow-sidebar.element.ts"],"sourcesContent":["import { html, customElement, css, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport * as pdfjsLib from 'pdfjs-dist';\r\nimport type { RenderTask } from 'pdfjs-dist';\r\n\r\n// Configure PDF.js worker (same path as zone editor)\r\npdfjsLib.GlobalWorkerOptions.workerSrc = '/App_Plugins/UpDoc/dist/pdf.worker.min.mjs';\r\n\r\n// Simple in-memory cache: mediaKey → PDFDocumentProxy\r\nconst pdfCache = new Map<string, pdfjsLib.PDFDocumentProxy>();\r\n\r\n/**\r\n * Renders a single PDF page as an image thumbnail using PDF.js.\r\n * Renders to an offscreen canvas, then converts to a data URL so the\r\n * result is a standard <img> that works anywhere (uui-card-media, etc.).\r\n *\r\n * Usage:\r\n *   <up-doc-pdf-thumbnail mediaKey=\"guid\" page=\"1\" width=\"300\" token=\"bearer-token\"></up-doc-pdf-thumbnail>\r\n */\r\n@customElement('up-doc-pdf-thumbnail')\r\nexport class UpDocPdfThumbnailElement extends UmbLitElement {\r\n\t/** Umbraco media item GUID */\r\n\t@property({ type: String }) mediaKey = '';\r\n\r\n\t/** Page number to render (1-based) */\r\n\t@property({ type: Number }) page = 1;\r\n\r\n\t/** Thumbnail width in pixels */\r\n\t@property({ type: Number }) width = 300;\r\n\r\n\t/** Auth token for fetching the PDF */\r\n\t@property({ type: String }) token = '';\r\n\r\n\t@state() private _loading = true;\r\n\t@state() private _error = '';\r\n\t@state() private _imageUrl = '';\r\n\r\n\tprivate _currentRenderTask: RenderTask | null = null;\r\n\tprivate _rendering = false;\r\n\r\n\toverride updated(changedProperties: Map<string, unknown>) {\r\n\t\tsuper.updated(changedProperties);\r\n\r\n\t\t// Only re-render when key inputs change, not on internal state changes\r\n\t\tif (\r\n\t\t\tchangedProperties.has('mediaKey') ||\r\n\t\t\tchangedProperties.has('page') ||\r\n\t\t\tchangedProperties.has('token')\r\n\t\t) {\r\n\t\t\tthis.#renderPage();\r\n\t\t}\r\n\t}\r\n\r\n\tasync #renderPage() {\r\n\t\tif (!this.mediaKey || !this.token) return;\r\n\r\n\t\t// Cancel any in-progress render\r\n\t\tif (this._currentRenderTask) {\r\n\t\t\tthis._currentRenderTask.cancel();\r\n\t\t\tthis._currentRenderTask = null;\r\n\t\t}\r\n\r\n\t\t// Guard against concurrent calls\r\n\t\tif (this._rendering) return;\r\n\t\tthis._rendering = true;\r\n\r\n\t\tthis._loading = true;\r\n\t\tthis._error = '';\r\n\r\n\t\ttry {\r\n\t\t\tconst pdfDoc = await this.#loadPdf();\r\n\t\t\tif (!pdfDoc) {\r\n\t\t\t\tthis._rendering = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.page < 1 || this.page > pdfDoc.numPages) {\r\n\t\t\t\tthis._error = `Page ${this.page} out of range (1-${pdfDoc.numPages})`;\r\n\t\t\t\tthis._loading = false;\r\n\t\t\t\tthis._rendering = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst pdfPage = await pdfDoc.getPage(this.page);\r\n\t\t\tconst unscaledViewport = pdfPage.getViewport({ scale: 1 });\r\n\t\t\tconst scale = this.width / unscaledViewport.width;\r\n\t\t\tconst viewport = pdfPage.getViewport({ scale });\r\n\r\n\t\t\t// Render to an offscreen canvas\r\n\t\t\tconst offscreen = document.createElement('canvas');\r\n\t\t\toffscreen.width = viewport.width;\r\n\t\t\toffscreen.height = viewport.height;\r\n\r\n\t\t\tconst ctx = offscreen.getContext('2d');\r\n\t\t\tif (!ctx) {\r\n\t\t\t\tthis._rendering = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._currentRenderTask = pdfPage.render({ canvasContext: ctx, viewport });\r\n\t\t\tawait this._currentRenderTask.promise;\r\n\t\t\tthis._currentRenderTask = null;\r\n\r\n\t\t\t// Convert to data URL — now it's just a regular image\r\n\t\t\tthis._imageUrl = offscreen.toDataURL('image/png');\r\n\t\t} catch (err: unknown) {\r\n\t\t\t// Ignore cancellation errors\r\n\t\t\tif (err instanceof Error && err.message?.includes('cancelled')) {\r\n\t\t\t\t// Render was cancelled — a new render will follow\r\n\t\t\t} else {\r\n\t\t\t\tthis._error = 'Failed to render PDF page';\r\n\t\t\t\tconsole.error('PDF thumbnail render error:', err);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tthis._loading = false;\r\n\t\t\tthis._rendering = false;\r\n\t\t}\r\n\t}\r\n\r\n\tasync #loadPdf(): Promise<pdfjsLib.PDFDocumentProxy | null> {\r\n\t\t// Check cache first\r\n\t\tconst cached = pdfCache.get(this.mediaKey);\r\n\t\tif (cached) return cached;\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t`/umbraco/management/api/v1/updoc/workflows/media-pdf?mediaKey=${this.mediaKey}`,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: { Authorization: `Bearer ${this.token}` },\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthis._error = 'Could not load PDF';\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst arrayBuffer = await response.arrayBuffer();\r\n\t\t\tconst loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });\r\n\t\t\tconst pdfDoc = await loadingTask.promise;\r\n\r\n\t\t\tpdfCache.set(this.mediaKey, pdfDoc);\r\n\t\t\treturn pdfDoc;\r\n\t\t} catch {\r\n\t\t\tthis._error = 'Could not load PDF';\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (this._error) {\r\n\t\t\treturn html`<div class=\"error\"><umb-icon name=\"icon-alert\"></umb-icon> ${this._error}</div>`;\r\n\t\t}\r\n\r\n\t\tif (this._loading) {\r\n\t\t\treturn html`<uui-loader-bar></uui-loader-bar>`;\r\n\t\t}\r\n\r\n\t\treturn html`<img src=${this._imageUrl} alt=\"PDF page ${this.page}\" />`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\timg {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: auto;\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t}\r\n\r\n\t\t\t.error {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tcolor: var(--uui-color-danger);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UpDocPdfThumbnailElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'up-doc-pdf-thumbnail': UpDocPdfThumbnailElement;\r\n\t}\r\n}\r\n","import './up-doc-pdf-thumbnail.element.js';\r\nimport { html, customElement, css, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_MEDIA_PICKER_MODAL } from '@umbraco-cms/backoffice/media';\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\n\r\n/**\r\n * PDF media picker with first-page thumbnail preview inside a uui-card-media.\r\n *\r\n * Opens Umbraco's standard media picker modal for browsing/selecting.\r\n * After selection, renders a uui-card-media with a PDF.js-rendered\r\n * thumbnail image of page 1 — matching the media library card style.\r\n *\r\n * Fires a 'change' CustomEvent with { mediaKey } when selection changes.\r\n *\r\n * Usage:\r\n *   <up-doc-pdf-picker @change=${this.#handlePdfChange}></up-doc-pdf-picker>\r\n */\r\n@customElement('up-doc-pdf-picker')\r\nexport class UpDocPdfPickerElement extends UmbLitElement {\r\n\t/** Optional label text shown on the card */\r\n\t@property({ type: String }) label = '';\r\n\r\n\t@state() private _mediaKey: string | null = null;\r\n\t@state() private _mediaName = '';\r\n\t@state() private _token = '';\r\n\r\n\toverride async connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\r\n\t\tthis._token = await authContext.getLatestToken();\r\n\t}\r\n\r\n\tasync #openPicker() {\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modal = modalManager.open(this, UMB_MEDIA_PICKER_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tmultiple: false,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst result = await modal.onSubmit().catch(() => null);\r\n\t\tif (!result?.selection?.length) return;\r\n\r\n\t\tconst mediaKey = result.selection[0];\r\n\t\tif (!mediaKey) return;\r\n\r\n\t\tthis._mediaKey = mediaKey;\r\n\t\tthis._mediaName = await this.#fetchMediaName(mediaKey);\r\n\r\n\t\tthis.dispatchEvent(\r\n\t\t\tnew CustomEvent('change', {\r\n\t\t\t\tdetail: { mediaKey },\r\n\t\t\t\tbubbles: true,\r\n\t\t\t\tcomposed: true,\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tasync #fetchMediaName(mediaKey: string): Promise<string> {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t`/umbraco/management/api/v1/media/item?id=${mediaKey}`,\r\n\t\t\t\t{ headers: { Authorization: `Bearer ${this._token}` } }\r\n\t\t\t);\r\n\t\t\tif (!response.ok) return 'PDF';\r\n\t\t\tconst items = await response.json();\r\n\t\t\treturn items?.[0]?.name ?? 'PDF';\r\n\t\t} catch {\r\n\t\t\treturn 'PDF';\r\n\t\t}\r\n\t}\r\n\r\n\t#handleRemove() {\r\n\t\tthis._mediaKey = null;\r\n\t\tthis._mediaName = '';\r\n\r\n\t\tthis.dispatchEvent(\r\n\t\t\tnew CustomEvent('change', {\r\n\t\t\t\tdetail: { mediaKey: null },\r\n\t\t\t\tbubbles: true,\r\n\t\t\t\tcomposed: true,\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._mediaKey) {\r\n\t\t\treturn html`\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tid=\"btn-add\"\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t@click=${this.#openPicker}\r\n\t\t\t\t\tlabel=\"Choose\">\r\n\t\t\t\t\t<uui-icon name=\"icon-add\"></uui-icon>\r\n\t\t\t\t\tChoose\r\n\t\t\t\t</uui-button>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-card-media name=${this._mediaName || 'PDF'}>\r\n\t\t\t\t<up-doc-pdf-thumbnail\r\n\t\t\t\t\tmediaKey=${this._mediaKey}\r\n\t\t\t\t\tpage=\"1\"\r\n\t\t\t\t\twidth=\"300\"\r\n\t\t\t\t\ttoken=${this._token}>\r\n\t\t\t\t</up-doc-pdf-thumbnail>\r\n\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlabel=\"Remove\"\r\n\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t@click=${this.#handleRemove}>\r\n\t\t\t\t\t\t<uui-icon name=\"icon-trash\"></uui-icon>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlabel=\"Change\"\r\n\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t@click=${this.#openPicker}>\r\n\t\t\t\t\t\t<uui-icon name=\"icon-edit\"></uui-icon>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t</uui-action-bar>\r\n\t\t\t</uui-card-media>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\t#btn-add {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\twidth: 200px;\r\n\t\t\t\theight: 200px;\r\n\t\t\t}\r\n\r\n\t\t\tuui-icon {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin: 0 auto;\r\n\t\t\t}\r\n\r\n\t\t\tuui-card-media {\r\n\t\t\t\twidth: 200px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UpDocPdfPickerElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'up-doc-pdf-picker': UpDocPdfPickerElement;\r\n\t}\r\n}\r\n","import type { CreateWorkflowSidebarData, CreateWorkflowSidebarValue } from './create-workflow-sidebar.token.js';\r\nimport { extractRich } from './workflow.service.js';\r\nimport './up-doc-pdf-picker.element.js';\r\nimport { html, customElement, css, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\nimport type { UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport type { UmbInputMediaElement } from '@umbraco-cms/backoffice/media';\r\n\r\nconst SOURCE_TYPE_OPTIONS = [\r\n\t{ value: 'pdf', name: 'PDF Document' },\r\n\t{ value: 'markdown', name: 'Markdown' },\r\n\t{ value: 'web', name: 'Web Page' },\r\n\t{ value: 'doc', name: 'Word Document' },\r\n];\r\n\r\ntype TabType = 'source' | 'destination';\r\n\r\n@customElement('create-workflow-sidebar')\r\nexport class CreateWorkflowSidebarElement extends UmbModalBaseElement<\r\n\tCreateWorkflowSidebarData,\r\n\tCreateWorkflowSidebarValue\r\n> {\r\n\t@state() private _activeTab: TabType = 'source';\r\n\t@state() private _name = '';\r\n\t@state() private _sourceType = '';\r\n\t@state() private _selectedMediaUnique: string | null = null;\r\n\t@state() private _sourceUrl = '';\r\n\t@state() private _extracting = false;\r\n\t@state() private _successMessage: string | null = null;\r\n\tprivate _nameManuallyEdited = false;\r\n\r\n\t#toKebabCase(value: string): string {\r\n\t\treturn value\r\n\t\t\t.replace(/([a-z])([A-Z])/g, '$1-$2')\r\n\t\t\t.replace(/[\\s_]+/g, '-')\r\n\t\t\t.toLowerCase();\r\n\t}\r\n\r\n\t#handleSourceTypeChange(e: Event) {\r\n\t\tconst target = e.target as Element & { value: string };\r\n\t\tconst newSourceType = target.value;\r\n\r\n\t\tif (newSourceType !== this._sourceType) {\r\n\t\t\tthis._selectedMediaUnique = null;\r\n\t\t\tthis._sourceUrl = '';\r\n\t\t\tthis._successMessage = null;\r\n\t\t}\r\n\r\n\t\tthis._sourceType = newSourceType;\r\n\r\n\t\t// Auto-generate name if not manually edited\r\n\t\tif (!this._nameManuallyEdited && this.data?.blueprintName && this._sourceType) {\r\n\t\t\tthis._name = `${this.#toKebabCase(this.data.blueprintName)}-${this._sourceType}`;\r\n\t\t}\r\n\r\n\t\tthis.requestUpdate();\r\n\t}\r\n\r\n\tasync #handlePdfPickerChange(e: CustomEvent) {\r\n\t\tconst detail = e.detail as { mediaKey: string | null };\r\n\t\tthis._selectedMediaUnique = detail?.mediaKey ?? null;\r\n\t\tthis._successMessage = null;\r\n\r\n\t\tif (this._selectedMediaUnique) {\r\n\t\t\tthis._extracting = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\r\n\t\t\t\tconst token = await authContext.getLatestToken();\r\n\t\t\t\tconst result = await extractRich(this._selectedMediaUnique, token);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tthis._successMessage = `Content extracted successfully — ${result.elements.length} elements from ${result.source.totalPages} pages`;\r\n\t\t\t\t}\r\n\t\t\t} catch {\r\n\t\t\t\t// Extraction preview failed — not critical, will retry on Create\r\n\t\t\t} finally {\r\n\t\t\t\tthis._extracting = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync #handleMediaChange(e: CustomEvent) {\r\n\t\tconst target = e.target as UmbInputMediaElement;\r\n\t\tconst selection = target.selection;\r\n\t\tthis._selectedMediaUnique = selection.length > 0 ? selection[0] : null;\r\n\t\tthis._successMessage = null;\r\n\t}\r\n\r\n\t#handleNameInput(e: UUIInputEvent) {\r\n\t\tthis._name = e.target.value as string;\r\n\t\tthis._nameManuallyEdited = true;\r\n\t}\r\n\r\n\t#handleTabClick(tab: TabType) {\r\n\t\tthis._activeTab = tab;\r\n\t}\r\n\r\n\tget #canCreate(): boolean {\r\n\t\treturn this._name.trim().length > 0 && this._sourceType.length > 0;\r\n\t}\r\n\r\n\t#handleSave() {\r\n\t\tif (!this.#canCreate) return;\r\n\r\n\t\tthis.value = {\r\n\t\t\tname: this._name.trim(),\r\n\t\t\tsourceType: this._sourceType,\r\n\t\t\tmediaUnique: this._selectedMediaUnique,\r\n\t\t\tsourceUrl: this._sourceUrl || null,\r\n\t\t\tdocumentTypeAlias: this.data!.documentTypeAlias,\r\n\t\t\tblueprintId: this.data!.blueprintUnique,\r\n\t\t\tblueprintName: this.data!.blueprintName,\r\n\t\t};\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\t#handleClose() {\r\n\t\tthis._rejectModal();\r\n\t}\r\n\r\n\t#renderTabs() {\r\n\t\treturn html`\r\n\t\t\t<uui-tab-group slot=\"navigation\">\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Source\"\r\n\t\t\t\t\t?active=${this._activeTab === 'source'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('source')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-page-add\"></uui-icon>\r\n\t\t\t\t\tSource\r\n\t\t\t\t</uui-tab>\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Destination\"\r\n\t\t\t\t\t?active=${this._activeTab === 'destination'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('destination')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-document\"></uui-icon>\r\n\t\t\t\t\tDestination\r\n\t\t\t\t</uui-tab>\r\n\t\t\t</uui-tab-group>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderSourceUI() {\r\n\t\tswitch (this._sourceType) {\r\n\t\t\tcase 'pdf':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<umb-property-layout label=\"Sample PDF\" description=\"Choose a representative PDF to use as a reference when building mapping rules.\" orientation=\"vertical\">\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<up-doc-pdf-picker @change=${this.#handlePdfPickerChange}></up-doc-pdf-picker>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t`;\r\n\t\t\tcase 'markdown':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<umb-property-layout label=\"Sample Markdown File\" description=\"Choose a representative Markdown file to use as a reference when building mapping rules.\" orientation=\"vertical\">\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<umb-input-media max=\"1\" @change=${this.#handleMediaChange}></umb-input-media>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t`;\r\n\t\t\tcase 'web':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<umb-property-layout label=\"Sample Web Page URL\" description=\"Enter a representative URL to use as a reference when building mapping rules.\" orientation=\"vertical\">\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\t\tlabel=\"URL\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"https://example.com/page\"\r\n\t\t\t\t\t\t\t\t.value=${this._sourceUrl}\r\n\t\t\t\t\t\t\t\t@input=${(e: UUIInputEvent) => (this._sourceUrl = e.target.value as string)}>\r\n\t\t\t\t\t\t\t</uui-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t`;\r\n\t\t\tcase 'doc':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<umb-property-layout label=\"Sample Word Document\" description=\"Choose a representative Word document to use as a reference when building mapping rules.\" orientation=\"vertical\">\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<umb-input-media max=\"1\" @change=${this.#handleMediaChange}></umb-input-media>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn nothing;\r\n\t\t}\r\n\t}\r\n\r\n\t#renderSourceTab() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Workflow Name\">\r\n\t\t\t\t<p>A unique name for this workflow. Used as the folder name on disk.</p>\r\n\t\t\t\t<uui-input\r\n\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\tlabel=\"name\"\r\n\t\t\t\t\tplaceholder=\"e.g. group-tour-pdf\"\r\n\t\t\t\t\t.value=${this._name}\r\n\t\t\t\t\t@input=${this.#handleNameInput}>\r\n\t\t\t\t</uui-input>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<uui-box headline=\"Source\">\r\n\t\t\t\t<umb-property-layout label=\"Source Type\" orientation=\"vertical\">\r\n\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t<uui-select\r\n\t\t\t\t\t\t\tlabel=\"Select source type\"\r\n\t\t\t\t\t\t\t.options=${[\r\n\t\t\t\t\t\t\t\t{ name: 'Choose a source...', value: '', selected: this._sourceType === '' },\r\n\t\t\t\t\t\t\t\t...SOURCE_TYPE_OPTIONS.map((st) => ({\r\n\t\t\t\t\t\t\t\t\t...st,\r\n\t\t\t\t\t\t\t\t\tselected: this._sourceType === st.value,\r\n\t\t\t\t\t\t\t\t})),\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t@change=${this.#handleSourceTypeChange}>\r\n\t\t\t\t\t\t</uui-select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</umb-property-layout>\r\n\r\n\t\t\t\t${this.#renderSourceUI()}\r\n\t\t\t\t${this._extracting ? html`<uui-loader-bar></uui-loader-bar>` : nothing}\r\n\t\t\t\t${this._successMessage ? html`<div class=\"success-banner\"><uui-icon name=\"icon-check\"></uui-icon> ${this._successMessage}</div>` : nothing}\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDestinationTab() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Document Type\">\r\n\t\t\t\t<div class=\"destination-value\">\r\n\t\t\t\t\t<umb-icon name=\"icon-document-dashed-line\"></umb-icon>\r\n\t\t\t\t\t<span>${this.data?.documentTypeName}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<uui-box headline=\"Blueprint\">\r\n\t\t\t\t<div class=\"destination-value\">\r\n\t\t\t\t\t<umb-icon name=\"icon-blueprint\"></umb-icon>\r\n\t\t\t\t\t<span>${this.data?.blueprintName}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderTabContent() {\r\n\t\tswitch (this._activeTab) {\r\n\t\t\tcase 'source':\r\n\t\t\t\treturn this.#renderSourceTab();\r\n\t\t\tcase 'destination':\r\n\t\t\t\treturn this.#renderDestinationTab();\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Create Workflow\">\r\n\t\t\t\t${this.#renderTabs()}\r\n\r\n\t\t\t\t<div class=\"tab-content\">\r\n\t\t\t\t\t${this.#renderTabContent()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"close\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}\r\n\t\t\t\t\t@click=\"${this.#handleClose}\"></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"save\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_create')}\r\n\t\t\t\t\t?disabled=${!this.#canCreate}\r\n\t\t\t\t\t@click=\"${this.#handleSave}\"></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t.destination-value {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-select {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.tab-content {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t.success-banner {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tmargin-top: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-2);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbackground-color: var(--uui-color-positive-emphasis);\r\n\t\t\t\tcolor: var(--uui-color-positive-contrast);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default CreateWorkflowSidebarElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'create-workflow-sidebar': CreateWorkflowSidebarElement;\r\n\t}\r\n}\r\n"],"names":["_UpDocPdfThumbnailElement_instances","renderPage_fn","loadPdf_fn","pdfjsLib.GlobalWorkerOptions","pdfCache","UpDocPdfThumbnailElement","UmbLitElement","__privateAdd","changedProperties","__privateMethod","html","pdfDoc","pdfPage","unscaledViewport","scale","viewport","offscreen","ctx","err","cached","response","arrayBuffer","pdfjsLib.getDocument","css","__decorateClass","property","state","customElement","_UpDocPdfPickerElement_instances","openPicker_fn","fetchMediaName_fn","handleRemove_fn","UpDocPdfPickerElement","authContext","UMB_AUTH_CONTEXT","result","UMB_MODAL_MANAGER_CONTEXT","UMB_MEDIA_PICKER_MODAL","mediaKey","_CreateWorkflowSidebarElement_instances","toKebabCase_fn","handleSourceTypeChange_fn","handlePdfPickerChange_fn","handleMediaChange_fn","handleNameInput_fn","handleTabClick_fn","canCreate_get","handleSave_fn","handleClose_fn","renderTabs_fn","renderSourceUI_fn","renderSourceTab_fn","renderDestinationTab_fn","renderTabContent_fn","SOURCE_TYPE_OPTIONS","CreateWorkflowSidebarElement","UmbModalBaseElement","__privateGet","value","newSourceType","detail","token","extractRich","selection","tab","nothing","st","UmbTextStyles","CreateWorkflowSidebarElement_default"],"mappings":"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"}