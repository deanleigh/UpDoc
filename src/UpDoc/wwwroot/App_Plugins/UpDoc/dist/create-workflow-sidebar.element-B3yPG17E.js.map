{"version":3,"file":"create-workflow-sidebar.element-B3yPG17E.js","sources":["../src/up-doc-pdf-picker.element.ts","../src/create-workflow-sidebar.element.ts"],"sourcesContent":["import './up-doc-pdf-thumbnail.element.js';\r\nimport { html, customElement, css, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_MEDIA_PICKER_MODAL } from '@umbraco-cms/backoffice/media';\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\n\r\n/**\r\n * PDF media picker with first-page thumbnail preview inside a uui-card-media.\r\n *\r\n * Opens Umbraco's standard media picker modal for browsing/selecting.\r\n * After selection, renders a uui-card-media with a PDF.js-rendered\r\n * thumbnail image of page 1 — matching the media library card style.\r\n *\r\n * Fires a 'change' CustomEvent with { mediaKey } when selection changes.\r\n *\r\n * Usage:\r\n *   <up-doc-pdf-picker @change=${this.#handlePdfChange}></up-doc-pdf-picker>\r\n */\r\n@customElement('up-doc-pdf-picker')\r\nexport class UpDocPdfPickerElement extends UmbLitElement {\r\n\t/** Optional label text shown on the card */\r\n\t@property({ type: String }) label = '';\r\n\r\n\t@state() private _mediaKey: string | null = null;\r\n\t@state() private _mediaName = '';\r\n\t@state() private _token = '';\r\n\r\n\toverride async connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\r\n\t\tthis._token = await authContext.getLatestToken();\r\n\t}\r\n\r\n\tasync #openPicker() {\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modal = modalManager.open(this, UMB_MEDIA_PICKER_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tmultiple: false,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst result = await modal.onSubmit().catch(() => null);\r\n\t\tif (!result?.selection?.length) return;\r\n\r\n\t\tconst mediaKey = result.selection[0];\r\n\t\tif (!mediaKey) return;\r\n\r\n\t\tthis._mediaKey = mediaKey;\r\n\t\tthis._mediaName = await this.#fetchMediaName(mediaKey);\r\n\r\n\t\tthis.dispatchEvent(\r\n\t\t\tnew CustomEvent('change', {\r\n\t\t\t\tdetail: { mediaKey },\r\n\t\t\t\tbubbles: true,\r\n\t\t\t\tcomposed: true,\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tasync #fetchMediaName(mediaKey: string): Promise<string> {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t`/umbraco/management/api/v1/media/item?id=${mediaKey}`,\r\n\t\t\t\t{ headers: { Authorization: `Bearer ${this._token}` } }\r\n\t\t\t);\r\n\t\t\tif (!response.ok) return 'PDF';\r\n\t\t\tconst items = await response.json();\r\n\t\t\treturn items?.[0]?.name ?? 'PDF';\r\n\t\t} catch {\r\n\t\t\treturn 'PDF';\r\n\t\t}\r\n\t}\r\n\r\n\t#handleRemove() {\r\n\t\tthis._mediaKey = null;\r\n\t\tthis._mediaName = '';\r\n\r\n\t\tthis.dispatchEvent(\r\n\t\t\tnew CustomEvent('change', {\r\n\t\t\t\tdetail: { mediaKey: null },\r\n\t\t\t\tbubbles: true,\r\n\t\t\t\tcomposed: true,\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._mediaKey) {\r\n\t\t\treturn html`\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tid=\"btn-add\"\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t@click=${this.#openPicker}\r\n\t\t\t\t\tlabel=\"Choose\">\r\n\t\t\t\t\t<uui-icon name=\"icon-add\"></uui-icon>\r\n\t\t\t\t\tChoose\r\n\t\t\t\t</uui-button>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-card-media name=${this._mediaName || 'PDF'}>\r\n\t\t\t\t<up-doc-pdf-thumbnail\r\n\t\t\t\t\tmediaKey=${this._mediaKey}\r\n\t\t\t\t\tpage=\"1\"\r\n\t\t\t\t\twidth=\"300\"\r\n\t\t\t\t\ttoken=${this._token}>\r\n\t\t\t\t</up-doc-pdf-thumbnail>\r\n\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlabel=\"Remove\"\r\n\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t@click=${this.#handleRemove}>\r\n\t\t\t\t\t\t<uui-icon name=\"icon-trash\"></uui-icon>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlabel=\"Change\"\r\n\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t@click=${this.#openPicker}>\r\n\t\t\t\t\t\t<uui-icon name=\"icon-edit\"></uui-icon>\r\n\t\t\t\t\t</uui-button>\r\n\t\t\t\t</uui-action-bar>\r\n\t\t\t</uui-card-media>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\t#btn-add {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\twidth: 200px;\r\n\t\t\t\theight: 200px;\r\n\t\t\t}\r\n\r\n\t\t\tuui-icon {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin: 0 auto;\r\n\t\t\t}\r\n\r\n\t\t\tuui-card-media {\r\n\t\t\t\twidth: 200px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UpDocPdfPickerElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'up-doc-pdf-picker': UpDocPdfPickerElement;\r\n\t}\r\n}\r\n","import type { CreateWorkflowSidebarData, CreateWorkflowSidebarValue } from './create-workflow-sidebar.token.js';\r\nimport { UMB_PAGE_PICKER_MODAL } from './page-picker-modal.token.js';\r\nimport { extractRich } from './workflow.service.js';\r\nimport './up-doc-pdf-picker.element.js';\r\nimport { html, customElement, css, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbModalBaseElement, UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\nimport type { UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport type { UmbInputMediaElement } from '@umbraco-cms/backoffice/media';\r\n\r\nconst SOURCE_TYPE_OPTIONS = [\r\n\t{ value: 'pdf', name: 'PDF Document' },\r\n\t{ value: 'markdown', name: 'Markdown' },\r\n\t{ value: 'web', name: 'Web Page' },\r\n\t{ value: 'doc', name: 'Word Document' },\r\n];\r\n\r\ntype TabType = 'source' | 'destination';\r\n\r\n@customElement('create-workflow-sidebar')\r\nexport class CreateWorkflowSidebarElement extends UmbModalBaseElement<\r\n\tCreateWorkflowSidebarData,\r\n\tCreateWorkflowSidebarValue\r\n> {\r\n\t@state() private _activeTab: TabType = 'source';\r\n\t@state() private _name = '';\r\n\t@state() private _sourceType = '';\r\n\t@state() private _selectedMediaUnique: string | null = null;\r\n\t@state() private _sourceUrl = '';\r\n\t@state() private _extracting = false;\r\n\t@state() private _totalPages = 0;\r\n\t@state() private _elementCount = 0;\r\n\t@state() private _fileName = '';\r\n\t@state() private _selectedPages: number[] | null = null;\r\n\tprivate _nameManuallyEdited = false;\r\n\r\n\t#toKebabCase(value: string): string {\r\n\t\treturn value\r\n\t\t\t.replace(/([a-z])([A-Z])/g, '$1-$2')\r\n\t\t\t.replace(/[\\s_]+/g, '-')\r\n\t\t\t.toLowerCase();\r\n\t}\r\n\r\n\t#handleSourceTypeChange(e: Event) {\r\n\t\tconst target = e.target as Element & { value: string };\r\n\t\tconst newSourceType = target.value;\r\n\r\n\t\tif (newSourceType !== this._sourceType) {\r\n\t\t\tthis._selectedMediaUnique = null;\r\n\t\t\tthis._sourceUrl = '';\r\n\t\t}\r\n\r\n\t\tthis._sourceType = newSourceType;\r\n\r\n\t\t// Auto-generate name if not manually edited\r\n\t\tif (!this._nameManuallyEdited && this.data?.blueprintName && this._sourceType) {\r\n\t\t\tthis._name = `${this.#toKebabCase(this.data.blueprintName)}-${this._sourceType}`;\r\n\t\t}\r\n\r\n\t\tthis.requestUpdate();\r\n\t}\r\n\r\n\tasync #handlePdfPickerChange(e: CustomEvent) {\r\n\t\tconst detail = e.detail as { mediaKey: string | null };\r\n\t\tthis._selectedMediaUnique = detail?.mediaKey ?? null;\r\n\t\tthis._totalPages = 0;\r\n\t\tthis._elementCount = 0;\r\n\t\tthis._fileName = '';\r\n\t\tthis._selectedPages = null;\r\n\r\n\t\tif (this._selectedMediaUnique) {\r\n\t\t\tthis._extracting = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\r\n\t\t\t\tconst token = await authContext.getLatestToken();\r\n\t\t\t\tconst result = await extractRich(this._selectedMediaUnique, token);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tthis._totalPages = result.source.totalPages;\r\n\t\t\t\t\tthis._elementCount = result.elements.length;\r\n\t\t\t\t\tthis._fileName = result.source.fileName;\r\n\t\t\t\t}\r\n\t\t\t} catch {\r\n\t\t\t\t// Extraction preview failed — not critical, will retry on Create\r\n\t\t\t} finally {\r\n\t\t\t\tthis._extracting = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync #onOpenPagePicker() {\r\n\t\tif (!this._selectedMediaUnique || this._totalPages === 0) return;\r\n\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tconst modal = modalManager.open(this, UMB_PAGE_PICKER_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tmediaKey: this._selectedMediaUnique,\r\n\t\t\t\ttotalPages: this._totalPages,\r\n\t\t\t\tselectedPages: this._selectedPages,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst result = await modal.onSubmit().catch(() => null);\r\n\t\tif (result === null) return; // cancelled\r\n\r\n\t\tthis._selectedPages = result.selectedPages;\r\n\t}\r\n\r\n\tasync #handleMediaChange(e: CustomEvent) {\r\n\t\tconst target = e.target as UmbInputMediaElement;\r\n\t\tconst selection = target.selection;\r\n\t\tthis._selectedMediaUnique = selection.length > 0 ? selection[0] : null;\r\n\t}\r\n\r\n\t#handleNameInput(e: UUIInputEvent) {\r\n\t\tthis._name = e.target.value as string;\r\n\t\tthis._nameManuallyEdited = true;\r\n\t}\r\n\r\n\t#handleTabClick(tab: TabType) {\r\n\t\tthis._activeTab = tab;\r\n\t}\r\n\r\n\tget #canCreate(): boolean {\r\n\t\treturn this._name.trim().length > 0 && this._sourceType.length > 0;\r\n\t}\r\n\r\n\t#handleSave() {\r\n\t\tif (!this.#canCreate) return;\r\n\r\n\t\tthis.value = {\r\n\t\t\tname: this._name.trim(),\r\n\t\t\tsourceType: this._sourceType,\r\n\t\t\tmediaUnique: this._selectedMediaUnique,\r\n\t\t\tsourceUrl: this._sourceUrl || null,\r\n\t\t\tdocumentTypeAlias: this.data!.documentTypeAlias,\r\n\t\t\tblueprintId: this.data!.blueprintUnique,\r\n\t\t\tblueprintName: this.data!.blueprintName,\r\n\t\t\tselectedPages: this._selectedPages,\r\n\t\t};\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\t#handleClose() {\r\n\t\tthis._rejectModal();\r\n\t}\r\n\r\n\t#renderTabs() {\r\n\t\treturn html`\r\n\t\t\t<uui-tab-group slot=\"navigation\">\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Source\"\r\n\t\t\t\t\t?active=${this._activeTab === 'source'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('source')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-page-add\"></uui-icon>\r\n\t\t\t\t\tSource\r\n\t\t\t\t</uui-tab>\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Destination\"\r\n\t\t\t\t\t?active=${this._activeTab === 'destination'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('destination')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-document\"></uui-icon>\r\n\t\t\t\t\tDestination\r\n\t\t\t\t</uui-tab>\r\n\t\t\t</uui-tab-group>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderExtractionStats() {\r\n\t\tif (!this._fileName) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"extraction-stats\">\r\n\t\t\t\t<span class=\"extraction-filename\">${this._fileName}</span>\r\n\t\t\t\t<div class=\"extraction-meta\">\r\n\t\t\t\t\t<span><uui-icon name=\"icon-thumbnails-small\"></uui-icon> ${this._totalPages} pages</span>\r\n\t\t\t\t\t<span><uui-icon name=\"icon-list\"></uui-icon> ${this._elementCount} elements</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDocumentBox() {\r\n\t\tswitch (this._sourceType) {\r\n\t\t\tcase 'pdf':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-box headline=\"Sample Document\">\r\n\t\t\t\t\t\t<up-doc-pdf-picker @change=${this.#handlePdfPickerChange}></up-doc-pdf-picker>\r\n\t\t\t\t\t\t${this._extracting ? html`<uui-loader-bar></uui-loader-bar>` : nothing}\r\n\t\t\t\t\t\t${this.#renderExtractionStats()}\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t`;\r\n\t\t\tcase 'markdown':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-box headline=\"Sample File\">\r\n\t\t\t\t\t\t<umb-input-media max=\"1\" @change=${this.#handleMediaChange}></umb-input-media>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t`;\r\n\t\t\tcase 'web':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-box headline=\"Sample URL\">\r\n\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\tlabel=\"URL\"\r\n\t\t\t\t\t\t\tplaceholder=\"https://example.com/page\"\r\n\t\t\t\t\t\t\t.value=${this._sourceUrl}\r\n\t\t\t\t\t\t\t@input=${(e: UUIInputEvent) => (this._sourceUrl = e.target.value as string)}>\r\n\t\t\t\t\t\t</uui-input>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t`;\r\n\t\t\tcase 'doc':\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<uui-box headline=\"Sample Document\">\r\n\t\t\t\t\t\t<umb-input-media max=\"1\" @change=${this.#handleMediaChange}></umb-input-media>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn nothing;\r\n\t\t}\r\n\t}\r\n\r\n\t#renderPagesBox() {\r\n\t\tif (this._totalPages === 0) return nothing;\r\n\r\n\t\tconst label = this._selectedPages\r\n\t\t\t? `${this._selectedPages.length} of ${this._totalPages} pages`\r\n\t\t\t: `All ${this._totalPages} pages`;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Pages\">\r\n\t\t\t\t<span class=\"page-selection-label\">${label}</span>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tlook=\"outline\"\r\n\t\t\t\t\tlabel=\"Choose Pages\"\r\n\t\t\t\t\t@click=${this.#onOpenPagePicker}\r\n\t\t\t\t\tclass=\"full-width-button\">\r\n\t\t\t\t\t<uui-icon name=\"icon-thumbnails-small\"></uui-icon>\r\n\t\t\t\t\tChoose Pages\r\n\t\t\t\t</uui-button>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderSourceTab() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Workflow Name\">\r\n\t\t\t\t<uui-input\r\n\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\tlabel=\"name\"\r\n\t\t\t\t\tplaceholder=\"e.g. group-tour-pdf\"\r\n\t\t\t\t\t.value=${this._name}\r\n\t\t\t\t\t@input=${this.#handleNameInput}>\r\n\t\t\t\t</uui-input>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<uui-box headline=\"Format\">\r\n\t\t\t\t<uui-select\r\n\t\t\t\t\tlabel=\"Select source format\"\r\n\t\t\t\t\t.options=${[\r\n\t\t\t\t\t\t{ name: 'Choose a format...', value: '', selected: this._sourceType === '' },\r\n\t\t\t\t\t\t...SOURCE_TYPE_OPTIONS.map((st) => ({\r\n\t\t\t\t\t\t\t...st,\r\n\t\t\t\t\t\t\tselected: this._sourceType === st.value,\r\n\t\t\t\t\t\t})),\r\n\t\t\t\t\t]}\r\n\t\t\t\t\t@change=${this.#handleSourceTypeChange}>\r\n\t\t\t\t</uui-select>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t${this.#renderDocumentBox()}\r\n\t\t\t${this.#renderPagesBox()}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDestinationTab() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Document Type\">\r\n\t\t\t\t<div class=\"destination-value\">\r\n\t\t\t\t\t<umb-icon name=\"icon-document-dashed-line\"></umb-icon>\r\n\t\t\t\t\t<span>${this.data?.documentTypeName}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<uui-box headline=\"Blueprint\">\r\n\t\t\t\t<div class=\"destination-value\">\r\n\t\t\t\t\t<umb-icon name=\"icon-blueprint\"></umb-icon>\r\n\t\t\t\t\t<span>${this.data?.blueprintName}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderTabContent() {\r\n\t\tswitch (this._activeTab) {\r\n\t\t\tcase 'source':\r\n\t\t\t\treturn this.#renderSourceTab();\r\n\t\t\tcase 'destination':\r\n\t\t\t\treturn this.#renderDestinationTab();\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Create Workflow\">\r\n\t\t\t\t${this.#renderTabs()}\r\n\r\n\t\t\t\t<div class=\"tab-content\">\r\n\t\t\t\t\t${this.#renderTabContent()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"close\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}\r\n\t\t\t\t\t@click=\"${this.#handleClose}\"></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"save\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_create')}\r\n\t\t\t\t\t?disabled=${!this.#canCreate}\r\n\t\t\t\t\t@click=\"${this.#handleSave}\"></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t.destination-value {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-select {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.tab-content {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-stats {\r\n\t\t\t\tmargin-top: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-3);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbackground: var(--uui-color-surface-alt);\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-filename {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-2);\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-meta {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-meta span {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-1);\r\n\t\t\t}\r\n\r\n\t\t\t.page-selection-label {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\t.full-width-button {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default CreateWorkflowSidebarElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'create-workflow-sidebar': CreateWorkflowSidebarElement;\r\n\t}\r\n}\r\n"],"names":["_UpDocPdfPickerElement_instances","openPicker_fn","fetchMediaName_fn","handleRemove_fn","UpDocPdfPickerElement","UmbLitElement","__privateAdd","authContext","UMB_AUTH_CONTEXT","html","__privateMethod","result","UMB_MODAL_MANAGER_CONTEXT","UMB_MEDIA_PICKER_MODAL","mediaKey","response","css","__decorateClass","property","state","customElement","_CreateWorkflowSidebarElement_instances","toKebabCase_fn","handleSourceTypeChange_fn","handlePdfPickerChange_fn","onOpenPagePicker_fn","handleMediaChange_fn","handleNameInput_fn","handleTabClick_fn","canCreate_get","handleSave_fn","handleClose_fn","renderTabs_fn","renderExtractionStats_fn","renderDocumentBox_fn","renderPagesBox_fn","renderSourceTab_fn","renderDestinationTab_fn","renderTabContent_fn","SOURCE_TYPE_OPTIONS","CreateWorkflowSidebarElement","UmbModalBaseElement","__privateGet","value","newSourceType","detail","token","extractRich","UMB_PAGE_PICKER_MODAL","selection","tab","nothing","label","st","UmbTextStyles","CreateWorkflowSidebarElement_default"],"mappings":"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"}