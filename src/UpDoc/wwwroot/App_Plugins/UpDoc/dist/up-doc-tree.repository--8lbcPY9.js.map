{"version":3,"file":"up-doc-tree.repository--8lbcPY9.js","sources":["../src/up-doc-tree.repository.ts"],"sourcesContent":["import { UmbTreeRepositoryBase, UmbTreeServerDataSourceBase } from '@umbraco-cms/backoffice/tree';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbApi } from '@umbraco-cms/backoffice/extension-api';\r\nimport type { UmbTreeRootModel, UmbTreeChildrenOfRequestArgs, UmbTreeAncestorsOfRequestArgs, UmbTreeRootItemsRequestArgs } from '@umbraco-cms/backoffice/tree';\r\n\r\nexport const UPDOC_ENTITY_TYPE = 'updoc';\r\nexport const UPDOC_ROOT_ENTITY_TYPE = 'updoc-root';\r\n\r\nexport interface UpDocTreeItemModel {\r\n\tunique: string;\r\n\tparent: { unique: string | null; entityType: string };\r\n\tentityType: string;\r\n\tname: string;\r\n\thasChildren: boolean;\r\n\tisFolder: boolean;\r\n\ticon: string;\r\n}\r\n\r\nclass UpDocTreeDataSource extends UmbTreeServerDataSourceBase<any, UpDocTreeItemModel> {\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tgetRootItems: async (_args: UmbTreeRootItemsRequestArgs) => {\r\n\t\t\t\t// Single item: \"UpDoc\" â€” this appears in the sidebar when hideTreeRoot is true\r\n\t\t\t\tconst items: UpDocTreeItemModel[] = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tunique: 'updoc-settings',\r\n\t\t\t\t\t\tparent: { unique: null, entityType: UPDOC_ROOT_ENTITY_TYPE },\r\n\t\t\t\t\t\tentityType: UPDOC_ENTITY_TYPE,\r\n\t\t\t\t\t\tname: 'UpDoc',\r\n\t\t\t\t\t\thasChildren: false,\r\n\t\t\t\t\t\tisFolder: false,\r\n\t\t\t\t\t\ticon: 'icon-nodes',\r\n\t\t\t\t\t},\r\n\t\t\t\t];\r\n\t\t\t\treturn { data: { items, total: items.length } };\r\n\t\t\t},\r\n\t\t\tgetChildrenOf: async (_args: UmbTreeChildrenOfRequestArgs) => {\r\n\t\t\t\treturn { data: { items: [], total: 0 } };\r\n\t\t\t},\r\n\t\t\tgetAncestorsOf: async (_args: UmbTreeAncestorsOfRequestArgs) => {\r\n\t\t\t\treturn { data: [] };\r\n\t\t\t},\r\n\t\t\tmapper: (item: any) => item,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport class UpDocTreeRepository\r\n\textends UmbTreeRepositoryBase<UpDocTreeItemModel, UmbTreeRootModel>\r\n\timplements UmbApi\r\n{\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UpDocTreeDataSource);\r\n\t}\r\n\r\n\tasync requestTreeRoot() {\r\n\t\tconst data: UmbTreeRootModel = {\r\n\t\t\tunique: null,\r\n\t\t\tentityType: UPDOC_ROOT_ENTITY_TYPE,\r\n\t\t\tname: 'UpDoc',\r\n\t\t\thasChildren: true,\r\n\t\t\tisFolder: true,\r\n\t\t};\r\n\t\treturn { data };\r\n\t}\r\n}\r\n\r\nexport { UpDocTreeRepository as api };\r\n"],"names":["UPDOC_ENTITY_TYPE","UPDOC_ROOT_ENTITY_TYPE","UpDocTreeDataSource","UmbTreeServerDataSourceBase","host","_args","items","item","UpDocTreeRepository","UmbTreeRepositoryBase"],"mappings":";AAKO,MAAMA,IAAoB,SACpBC,IAAyB;AAYtC,MAAMC,UAA4BC,EAAqD;AAAA,EACtF,YAAYC,GAAyB;AACpC,UAAMA,GAAM;AAAA,MACX,cAAc,OAAOC,MAAuC;AAE3D,cAAMC,IAA8B;AAAA,UACnC;AAAA,YACC,QAAQ;AAAA,YACR,QAAQ,EAAE,QAAQ,MAAM,YAAYL,EAAA;AAAA,YACpC,YAAYD;AAAA,YACZ,MAAM;AAAA,YACN,aAAa;AAAA,YACb,UAAU;AAAA,YACV,MAAM;AAAA,UAAA;AAAA,QACP;AAED,eAAO,EAAE,MAAM,EAAE,OAAAM,GAAO,OAAOA,EAAM,SAAO;AAAA,MAC7C;AAAA,MACA,eAAe,OAAOD,OACd,EAAE,MAAM,EAAE,OAAO,CAAA,GAAI,OAAO,IAAE;AAAA,MAEtC,gBAAgB,OAAOA,OACf,EAAE,MAAM,GAAC;AAAA,MAEjB,QAAQ,CAACE,MAAcA;AAAA,IAAA,CACvB;AAAA,EACF;AACD;AAEO,MAAMC,UACJC,EAET;AAAA,EACC,YAAYL,GAAyB;AACpC,UAAMA,GAAMF,CAAmB;AAAA,EAChC;AAAA,EAEA,MAAM,kBAAkB;AAQvB,WAAO,EAAE,MAPsB;AAAA,MAC9B,QAAQ;AAAA,MACR,YAAYD;AAAA,MACZ,MAAM;AAAA,MACN,aAAa;AAAA,MACb,UAAU;AAAA,IAAA,EAEF;AAAA,EACV;AACD;"}