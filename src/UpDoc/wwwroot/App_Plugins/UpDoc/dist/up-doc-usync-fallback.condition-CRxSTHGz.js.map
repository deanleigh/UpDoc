{"version":3,"file":"up-doc-usync-fallback.condition-CRxSTHGz.js","sources":["../src/up-doc-usync-fallback.condition.ts"],"sourcesContent":["import type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type {\r\n\tUmbConditionConfigBase,\r\n\tUmbConditionControllerArguments,\r\n\tUmbExtensionCondition,\r\n} from '@umbraco-cms/backoffice/extension-api';\r\nimport { UmbConditionBase, umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n/**\r\n * Condition that permits when uSync is NOT installed.\r\n * Used to show UpDoc's own sidebar group as a fallback\r\n * when uSync's \"Synchronisation\" group isn't available.\r\n */\r\nexport class UpDocUsyncFallbackCondition\r\n\textends UmbConditionBase<UmbConditionConfigBase>\r\n\timplements UmbExtensionCondition\r\n{\r\n\tconstructor(host: UmbControllerHost, args: UmbConditionControllerArguments<UmbConditionConfigBase>) {\r\n\t\tsuper(host, args);\r\n\r\n\t\tthis.observe(\r\n\t\t\tumbExtensionsRegistry.byType('menu'),\r\n\t\t\t(menus) => {\r\n\t\t\t\tconst hasUsync = menus.some((m) => m.alias === 'usync.menu');\r\n\t\t\t\tthis.permitted = !hasUsync;\r\n\t\t\t},\r\n\t\t\t'upDocUsyncCheck',\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { UpDocUsyncFallbackCondition as api };\r\n"],"names":["UpDocUsyncFallbackCondition","UmbConditionBase","host","args","umbExtensionsRegistry","menus","hasUsync","m"],"mappings":";AAaO,MAAMA,UACJC,EAET;AAAA,EACC,YAAYC,GAAyBC,GAA+D;AACnG,UAAMD,GAAMC,CAAI,GAEhB,KAAK;AAAA,MACJC,EAAsB,OAAO,MAAM;AAAA,MACnC,CAACC,MAAU;AACV,cAAMC,IAAWD,EAAM,KAAK,CAACE,MAAMA,EAAE,UAAU,YAAY;AAC3D,aAAK,YAAY,CAACD;AAAA,MACnB;AAAA,MACA;AAAA,IAAA;AAAA,EAEF;AACD;"}