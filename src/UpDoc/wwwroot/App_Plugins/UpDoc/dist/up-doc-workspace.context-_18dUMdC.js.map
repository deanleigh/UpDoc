{"version":3,"file":"up-doc-workspace.context-_18dUMdC.js","sources":["../src/up-doc-workspace.context.ts"],"sourcesContent":["import { UmbWorkspaceRouteManager, UMB_WORKSPACE_CONTEXT } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbObjectState } from '@umbraco-cms/backoffice/observable-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbContextBase } from '@umbraco-cms/backoffice/class-api';\r\nimport { LitElement, html } from '@umbraco-cms/backoffice/external/lit';\r\nimport { customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UPDOC_ENTITY_TYPE } from './up-doc-tree.repository.js';\r\n\r\n@customElement('up-doc-workspace-editor')\r\nclass UpDocWorkspaceEditorElement extends LitElement {\r\n\toverride render() {\r\n\t\treturn html`<umb-workspace-editor></umb-workspace-editor>`;\r\n\t}\r\n}\r\n\r\ninterface UpDocWorkspaceData {\r\n\tunique: string;\r\n\tname?: string;\r\n}\r\n\r\nexport class UpDocWorkspaceContext extends UmbContextBase {\r\n\tpublic readonly workspaceAlias = 'UpDoc.Workspace';\r\n\r\n\t#data = new UmbObjectState<UpDocWorkspaceData | undefined>(undefined);\r\n\treadonly data = this.#data.asObservable();\r\n\treadonly unique = this.#data.asObservablePart((data) => data?.unique);\r\n\treadonly name = this.#data.asObservablePart((data) => data?.name);\r\n\r\n\treadonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, UMB_WORKSPACE_CONTEXT);\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UpDocWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component: HTMLElement, info: any) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tasync load(unique: string) {\r\n\t\tthis.#data.setValue({ unique, name: 'UpDoc' });\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this.#data.getValue()?.unique;\r\n\t}\r\n\r\n\tgetEntityType() {\r\n\t\treturn UPDOC_ENTITY_TYPE;\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tthis.#data.destroy();\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nexport { UpDocWorkspaceContext as api };\r\n"],"names":["UpDocWorkspaceEditorElement","LitElement","html","__decorateClass","customElement","UpDocWorkspaceContext","UmbContextBase","host","UMB_WORKSPACE_CONTEXT","__privateAdd","_data","__privateSet","UmbObjectState","__privateGet","data","UmbWorkspaceRouteManager","_component","info","unique","_a","UPDOC_ENTITY_TYPE"],"mappings":";;;;;;;;;;;;;;;AASA,IAAMA,IAAN,cAA0CC,EAAW;AAAA,EAC3C,SAAS;AACjB,WAAOC;AAAA,EACR;AACD;AAJMF,IAANG,EAAA;AAAA,EADCC,EAAc,yBAAyB;AAAA,GAClCJ,CAAA;;AAWC,MAAMK,UAA8BC,EAAe;AAAA,EAUzD,YAAYC,GAAyB;AACpC,UAAMA,GAAMC,CAAqB;AARlC,IAAAC,EAAA,MAAAC;AAFA,SAAgB,iBAAiB,mBAEjCC,EAAA,MAAAD,GAAQ,IAAIE,EAA+C,MAAS,IACpE,KAAS,OAAOC,EAAA,MAAKH,GAAM,aAAA,GAC3B,KAAS,SAASG,EAAA,MAAKH,GAAM,iBAAiB,CAACI,MAASA,KAAA,gBAAAA,EAAM,MAAM,GACpE,KAAS,OAAOD,EAAA,MAAKH,GAAM,iBAAiB,CAACI,MAASA,KAAA,gBAAAA,EAAM,IAAI,GAEhE,KAAS,SAAS,IAAIC,EAAyB,IAAI,GAKlD,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWf;AAAA,QACX,OAAO,CAACgB,GAAyBC,MAAc;AAC9C,gBAAMC,IAASD,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKC,CAAM;AAAA,QACjB;AAAA,MAAA;AAAA,IACD,CACA;AAAA,EACF;AAAA,EAEA,MAAM,KAAKA,GAAgB;AAC1B,IAAAL,EAAA,MAAKH,GAAM,SAAS,EAAE,QAAAQ,GAAQ,MAAM,SAAS;AAAA,EAC9C;AAAA,EAEA,YAAY;;AACX,YAAOC,IAAAN,EAAA,MAAKH,GAAM,SAAA,MAAX,gBAAAS,EAAuB;AAAA,EAC/B;AAAA,EAEA,gBAAgB;AACf,WAAOC;AAAA,EACR;AAAA,EAEgB,UAAgB;AAC/B,IAAAP,EAAA,MAAKH,GAAM,QAAA,GACX,MAAM,QAAA;AAAA,EACP;AACD;AAtCCA,IAAA;"}