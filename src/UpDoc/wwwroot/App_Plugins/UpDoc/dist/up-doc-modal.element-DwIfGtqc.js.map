{"version":3,"file":"up-doc-modal.element-DwIfGtqc.js","sources":["../src/up-doc-modal.element.ts"],"sourcesContent":["import type { UmbUpDocModalData, UmbUpDocModalValue, SourceType } from './up-doc-modal.token.js';\r\nimport type { DocumentTypeConfig } from './workflow.types.js';\r\nimport { extractSections, fetchConfig } from './workflow.service.js';\r\nimport { html, customElement, css, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport type { UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport type { UmbInputMediaElement } from '@umbraco-cms/backoffice/media';\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\n\r\n// Human-readable labels for extracted section keys\r\nconst SECTION_LABELS: Record<string, string> = {\r\n\ttitle: 'Page Title',\r\n\tdescription: 'Description',\r\n\titinerary: 'Itinerary',\r\n\tfeatures: 'Features',\r\n\taccommodation: 'Accommodation',\r\n};\r\n\r\n// Human-readable labels for source type keys\r\nconst SOURCE_TYPE_LABELS: Record<string, string> = {\r\n\tpdf: 'PDF Document',\r\n\tmarkdown: 'Markdown',\r\n\tweb: 'Web Page',\r\n\tdoc: 'Word Document',\r\n};\r\n\r\ntype TabType = 'source' | 'content' | 'destination';\r\n\r\n@customElement('up-doc-modal')\r\nexport class UpDocModalElement extends UmbModalBaseElement<\r\n\tUmbUpDocModalData,\r\n\tUmbUpDocModalValue\r\n> {\r\n\t@state()\r\n\tprivate _activeTab: TabType = 'source';\r\n\r\n\t@state()\r\n\tprivate _documentName = '';\r\n\r\n\t@state()\r\n\tprivate _sourceType: SourceType | '' = '';\r\n\r\n\t@state()\r\n\tprivate _sourceUrl = '';\r\n\r\n\t@state()\r\n\tprivate _selectedMediaUnique: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _extractedSections: Record<string, string> = {};\r\n\r\n\t@state()\r\n\tprivate _config: DocumentTypeConfig | null = null;\r\n\r\n\t@state()\r\n\tprivate _isExtracting = false;\r\n\r\n\t@state()\r\n\tprivate _extractionError: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _availableSourceTypes: string[] = [];\r\n\r\n\t@state()\r\n\tprivate _loadingSourceTypes = true;\r\n\r\n\toverride firstUpdated() {\r\n\t\tthis._documentName = '';\r\n\t\tthis._sourceType = '';\r\n\t\tthis._sourceUrl = '';\r\n\t\tthis._selectedMediaUnique = null;\r\n\t\tthis._extractedSections = {};\r\n\t\tthis._config = null;\r\n\t\tthis.#loadAvailableSourceTypes();\r\n\t}\r\n\r\n\tasync #loadAvailableSourceTypes() {\r\n\t\tthis._loadingSourceTypes = true;\r\n\t\ttry {\r\n\t\t\tconst blueprintId = this.data?.blueprintId;\r\n\t\t\tif (!blueprintId) return;\r\n\r\n\t\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\r\n\t\t\tconst token = await authContext.getLatestToken();\r\n\t\t\tconst config = await fetchConfig(blueprintId, token);\r\n\r\n\t\t\tif (config?.sources) {\r\n\t\t\t\tthis._availableSourceTypes = Object.keys(config.sources);\r\n\r\n\t\t\t\t// Auto-select if only one source type is available\r\n\t\t\t\tif (this._availableSourceTypes.length === 1) {\r\n\t\t\t\t\tthis._sourceType = this._availableSourceTypes[0] as SourceType;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Failed to load available source types:', err);\r\n\t\t} finally {\r\n\t\t\tthis._loadingSourceTypes = false;\r\n\t\t}\r\n\t}\r\n\r\n\t#handleSourceTypeChange(e: Event) {\r\n\t\tconst target = e.target as Element & { value: string };\r\n\t\tconst newSourceType = target.value as SourceType | '';\r\n\r\n\t\tif (newSourceType !== this._sourceType) {\r\n\t\t\tthis._selectedMediaUnique = null;\r\n\t\t\tthis._sourceUrl = '';\r\n\t\t\tthis._extractedSections = {};\r\n\t\t\tthis._config = null;\r\n\t\t\tthis._extractionError = null;\r\n\t\t}\r\n\r\n\t\tthis._sourceType = newSourceType;\r\n\t}\r\n\r\n\tasync #handleMediaChange(e: CustomEvent) {\r\n\t\tconst target = e.target as UmbInputMediaElement;\r\n\t\tconst selection = target.selection;\r\n\t\tthis._selectedMediaUnique = selection.length > 0 ? selection[0] : null;\r\n\r\n\t\tif (this._selectedMediaUnique) {\r\n\t\t\tawait this.#extractFromSource(this._selectedMediaUnique);\r\n\t\t} else {\r\n\t\t\tthis._extractedSections = {};\r\n\t\t\tthis._config = null;\r\n\t\t\tthis._documentName = '';\r\n\t\t\tthis._extractionError = null;\r\n\t\t}\r\n\t}\r\n\r\n\tasync #extractFromSource(mediaUnique: string) {\r\n\t\tthis._isExtracting = true;\r\n\t\tthis._extractionError = null;\r\n\r\n\t\ttry {\r\n\t\t\tconst blueprintId = this.data?.blueprintId;\r\n\t\t\tif (!blueprintId) {\r\n\t\t\t\tthis._extractionError = 'No blueprint ID available';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\r\n\t\t\tconst token = await authContext.getLatestToken();\r\n\r\n\t\t\tconst result = await extractSections(mediaUnique, blueprintId, token, this._sourceType || 'pdf');\r\n\r\n\t\t\tif (!result) {\r\n\t\t\t\tthis._extractionError = 'Failed to extract content from source';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._extractedSections = result.sections;\r\n\t\t\tthis._config = result.config;\r\n\r\n\t\t\t// === DEBUG: Log extracted sections ===\r\n\t\t\tconsole.log('=== EXTRACTION COMPLETE ===');\r\n\t\t\tconsole.log('Extracted sections:');\r\n\t\t\tfor (const [key, value] of Object.entries(result.sections)) {\r\n\t\t\t\tconsole.log(`  ${key}: ${value ? `${value.length} chars - \"${value.substring(0, 80)}...\"` : '(empty)'}`);\r\n\t\t\t}\r\n\t\t\tconsole.log('Config loaded:', result.config ? 'yes' : 'no');\r\n\t\t\tif (result.config) {\r\n\t\t\t\tconsole.log('  Document type:', result.config.destination.documentTypeAlias);\r\n\t\t\t\tconsole.log('  Blueprint:', result.config.destination.blueprintName);\r\n\t\t\t\tconsole.log('  Mappings:', result.config.map.mappings.map(m => `${m.source} -> ${m.destinations.map(d => d.target).join(', ')}`));\r\n\t\t\t}\r\n\t\t\tconsole.log('=== END EXTRACTION ===');\r\n\r\n\t\t\t// Pre-fill document name with extracted title\r\n\t\t\tif (result.sections['title'] && !this._documentName) {\r\n\t\t\t\tthis._documentName = result.sections['title'];\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tthis._extractionError = 'Failed to connect to extraction service';\r\n\t\t\tconsole.error('Extraction error:', error);\r\n\t\t} finally {\r\n\t\t\tthis._isExtracting = false;\r\n\t\t}\r\n\t}\r\n\r\n\t#handleSave() {\r\n\t\t// === DEBUG: Log what we're passing to the action ===\r\n\t\tconsole.log('=== CREATE BUTTON CLICKED ===');\r\n\t\tconsole.log('Document name:', this._documentName);\r\n\t\tconsole.log('Extracted sections being passed:');\r\n\t\tfor (const [key, value] of Object.entries(this._extractedSections)) {\r\n\t\t\tconsole.log(`  ${key}: ${value ? `${value.length} chars` : '(empty)'}`);\r\n\t\t}\r\n\t\tconsole.log('Config being passed:', this._config ? 'yes' : 'no');\r\n\t\tconsole.log('=== END CREATE DEBUG ===');\r\n\r\n\t\tthis.value = {\r\n\t\t\tname: this._documentName,\r\n\t\t\tsourceType: this._sourceType as SourceType,\r\n\t\t\tmediaUnique: this._selectedMediaUnique,\r\n\t\t\tsourceUrl: this._sourceUrl || null,\r\n\t\t\textractedSections: this._extractedSections,\r\n\t\t\tconfig: this._config,\r\n\t\t};\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\t#handleClose() {\r\n\t\tthis._rejectModal();\r\n\t}\r\n\r\n\t#renderSourceUI() {\r\n\t\tswitch (this._sourceType) {\r\n\t\t\tcase 'pdf':\r\n\t\t\t\treturn this.#renderPdfSource();\r\n\t\t\tcase 'markdown':\r\n\t\t\t\treturn this.#renderMarkdownSource();\r\n\t\t\tcase 'web':\r\n\t\t\t\treturn this.#renderWebSource();\r\n\t\t\tcase 'doc':\r\n\t\t\t\treturn this.#renderDocSource();\r\n\t\t\tdefault:\r\n\t\t\t\treturn nothing;\r\n\t\t}\r\n\t}\r\n\r\n\t#renderPdfSource() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout label=\"PDF File\" orientation=\"vertical\">\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<umb-input-media\r\n\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t@change=${this.#handleMediaChange}>\r\n\t\t\t\t\t</umb-input-media>\r\n\t\t\t\t\t${this.#renderExtractionStatus()}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderMarkdownSource() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout label=\"Markdown File\" orientation=\"vertical\">\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<umb-input-media\r\n\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t@change=${this.#handleMediaChange}>\r\n\t\t\t\t\t</umb-input-media>\r\n\t\t\t\t\t${this.#renderExtractionStatus()}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderWebSource() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout label=\"Web Page URL\" orientation=\"vertical\">\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\tlabel=\"URL\"\r\n\t\t\t\t\t\tplaceholder=\"https://example.com/page\"\r\n\t\t\t\t\t\t.value=${this._sourceUrl}\r\n\t\t\t\t\t\t@input=${(e: UUIInputEvent) => (this._sourceUrl = e.target.value as string)}>\r\n\t\t\t\t\t</uui-input>\r\n\t\t\t\t\t<div class=\"source-coming-soon\">\r\n\t\t\t\t\t\t<uui-icon name=\"icon-info\"></uui-icon>\r\n\t\t\t\t\t\t<span>Web page extraction is not yet available.</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDocSource() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout label=\"Word Document\" orientation=\"vertical\">\r\n\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t<umb-input-media\r\n\t\t\t\t\t\tmax=\"1\"\r\n\t\t\t\t\t\t@change=${(e: CustomEvent) => {\r\n\t\t\t\t\t\t\tconst target = e.target as UmbInputMediaElement;\r\n\t\t\t\t\t\t\tconst selection = target.selection;\r\n\t\t\t\t\t\t\tthis._selectedMediaUnique = selection.length > 0 ? selection[0] : null;\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t</umb-input-media>\r\n\t\t\t\t\t<div class=\"source-coming-soon\">\r\n\t\t\t\t\t\t<uui-icon name=\"icon-info\"></uui-icon>\r\n\t\t\t\t\t\t<span>Word document extraction is not yet available.</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#getSectionLabel(key: string): string {\r\n\t\treturn SECTION_LABELS[key] || key.charAt(0).toUpperCase() + key.slice(1);\r\n\t}\r\n\r\n\t#hasExtractedContent(): boolean {\r\n\t\treturn Object.values(this._extractedSections).some((v) => v.length > 0);\r\n\t}\r\n\r\n\t#handleTabClick(tab: TabType) {\r\n\t\tif (tab === 'content' && !this.#hasExtractedContent()) {\r\n\t\t\treturn; // Don't switch to content tab if no content\r\n\t\t}\r\n\t\tthis._activeTab = tab;\r\n\t}\r\n\r\n\t#updateSection(key: string, value: string) {\r\n\t\tthis._extractedSections = {\r\n\t\t\t...this._extractedSections,\r\n\t\t\t[key]: value,\r\n\t\t};\r\n\t}\r\n\r\n\t#renderExtractionStatus() {\r\n\t\tif (this._isExtracting) {\r\n\t\t\treturn html`<div class=\"extraction-status extracting\">\r\n\t\t\t\t<uui-loader-bar></uui-loader-bar>\r\n\t\t\t\t<span>Extracting content from source...</span>\r\n\t\t\t</div>`;\r\n\t\t}\r\n\r\n\t\tif (this._extractionError) {\r\n\t\t\treturn html`<div class=\"extraction-status error\">\r\n\t\t\t\t<uui-icon name=\"icon-alert\"></uui-icon>\r\n\t\t\t\t<span>${this._extractionError}</span>\r\n\t\t\t</div>`;\r\n\t\t}\r\n\r\n\t\tconst hasContent = Object.values(this._extractedSections).some((v) => v.length > 0);\r\n\t\tif (hasContent) {\r\n\t\t\treturn html`<div class=\"extraction-status success\">\r\n\t\t\t\t<uui-icon name=\"icon-check\"></uui-icon>\r\n\t\t\t\t<span>Content extracted successfully</span>\r\n\t\t\t</div>`;\r\n\t\t}\r\n\r\n\t\treturn nothing;\r\n\t}\r\n\r\n\t#renderTabs() {\r\n\t\tconst hasContent = this.#hasExtractedContent();\r\n\t\treturn html`\r\n\t\t\t<uui-tab-group slot=\"navigation\">\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Source\"\r\n\t\t\t\t\t?active=${this._activeTab === 'source'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('source')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-page-add\"></uui-icon>\r\n\t\t\t\t\tSource\r\n\t\t\t\t</uui-tab>\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Content\"\r\n\t\t\t\t\t?active=${this._activeTab === 'content'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t?disabled=${!hasContent}\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('content')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-edit\"></uui-icon>\r\n\t\t\t\t\tContent\r\n\t\t\t\t</uui-tab>\r\n\t\t\t\t<uui-tab\r\n\t\t\t\t\tlabel=\"Destination\"\r\n\t\t\t\t\t?active=${this._activeTab === 'destination'}\r\n\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t@click=${() => this.#handleTabClick('destination')}>\r\n\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-document\"></uui-icon>\r\n\t\t\t\t\tDestination\r\n\t\t\t\t</uui-tab>\r\n\t\t\t</uui-tab-group>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderSourceTab() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Document Name\">\r\n\t\t\t\t<p>Enter a document name or let it be populated from the source. You can edit this later.</p>\r\n\t\t\t\t<uui-input\r\n\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\tlabel=\"name\"\r\n\t\t\t\t\tplaceholder=\"Enter document name\"\r\n\t\t\t\t\t.value=${this._documentName}\r\n\t\t\t\t\t@input=${(e: UUIInputEvent) => (this._documentName = e.target.value as string)}>\r\n\t\t\t\t</uui-input>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<uui-box headline=\"Source\">\r\n\t\t\t\t${this._loadingSourceTypes\r\n\t\t\t\t\t? html`<uui-loader-bar></uui-loader-bar>`\r\n\t\t\t\t\t: this._availableSourceTypes.length === 0\r\n\t\t\t\t\t\t? html`<p style=\"color: var(--uui-color-danger);\">No source types configured for this workflow.</p>`\r\n\t\t\t\t\t\t: html`\r\n\t\t\t\t\t\t\t<umb-property-layout label=\"Source Type\" orientation=\"vertical\">\r\n\t\t\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t\t\t<uui-select\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Select source type\"\r\n\t\t\t\t\t\t\t\t\t\t.options=${[\r\n\t\t\t\t\t\t\t\t\t\t\t...(this._availableSourceTypes.length > 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t? [{ name: 'Choose a source...', value: '', selected: this._sourceType === '' }]\r\n\t\t\t\t\t\t\t\t\t\t\t\t: []),\r\n\t\t\t\t\t\t\t\t\t\t\t...this._availableSourceTypes.map((st) => ({\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: SOURCE_TYPE_LABELS[st] || st,\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: st,\r\n\t\t\t\t\t\t\t\t\t\t\t\tselected: this._sourceType === st,\r\n\t\t\t\t\t\t\t\t\t\t\t})),\r\n\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t\t@change=${this.#handleSourceTypeChange}>\r\n\t\t\t\t\t\t\t\t\t</uui-select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</umb-property-layout>\r\n\r\n\t\t\t\t\t\t\t${this.#renderSourceUI()}\r\n\t\t\t\t\t\t`}\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderContentTab() {\r\n\t\tconst sections = this._extractedSections;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"content-editor\">\r\n\t\t\t\t<p class=\"content-editor-intro\">\r\n\t\t\t\t\tReview the extracted content before creating the document.\r\n\t\t\t\t</p>\r\n\t\t\t\t${Object.entries(sections).map(([key, value]) => {\r\n\t\t\t\t\tif (!value) return nothing;\r\n\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t<div class=\"section-card\">\r\n\t\t\t\t\t\t\t<div class=\"section-card-header\">\r\n\t\t\t\t\t\t\t\t<span class=\"section-card-label\">${this.#getSectionLabel(key)}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"section-card-body\">\r\n\t\t\t\t\t\t\t\t<uui-action-bar class=\"section-card-actions\">\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t\t\ttitle=\"Edit\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Edit ${this.#getSectionLabel(key)}\"\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#openSectionEditor(key)}>\r\n\t\t\t\t\t\t\t\t\t\t<uui-icon name=\"icon-edit\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t\t\ttitle=\"Copy\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Copy ${this.#getSectionLabel(key)}\"\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#copySection(key, value)}>\r\n\t\t\t\t\t\t\t\t\t\t<uui-icon name=\"icon-documents\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t</uui-action-bar>\r\n\t\t\t\t\t\t\t\t<div class=\"section-card-content\">${value}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderDestinationTab() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=\"Document Type\">\r\n\t\t\t\t<div class=\"destination-value\">\r\n\t\t\t\t\t<umb-icon name=\"icon-document-dashed-line\"></umb-icon>\r\n\t\t\t\t\t<span>${this.data?.documentTypeName}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\r\n\t\t\t<uui-box headline=\"Blueprint\">\r\n\t\t\t\t<div class=\"destination-value\">\r\n\t\t\t\t\t<umb-icon name=\"icon-blueprint\"></umb-icon>\r\n\t\t\t\t\t<span>${this.data?.blueprintName}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#openSectionEditor(key: string) {\r\n\t\t// TODO: Open editor modal for this section\r\n\t\tconsole.log('Edit section:', key);\r\n\t}\r\n\r\n\tasync #copySection(key: string, value: string) {\r\n\t\ttry {\r\n\t\t\tawait navigator.clipboard.writeText(value);\r\n\t\t\t// TODO: Show toast notification \"Copied to clipboard\"\r\n\t\t\tconsole.log('Copied to clipboard:', key);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Failed to copy:', err);\r\n\t\t}\r\n\t}\r\n\r\n\t#getCanCreate(): boolean {\r\n\t\tif (!this._documentName || this._isExtracting) return false;\r\n\r\n\t\tswitch (this._sourceType) {\r\n\t\t\tcase 'pdf':\r\n\t\t\tcase 'markdown':\r\n\t\t\t\treturn !!this._selectedMediaUnique;\r\n\t\t\tcase 'web':\r\n\t\t\tcase 'doc':\r\n\t\t\t\treturn false;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t#renderTabContent() {\r\n\t\tswitch (this._activeTab) {\r\n\t\t\tcase 'source':\r\n\t\t\t\treturn this.#renderSourceTab();\r\n\t\t\tcase 'content':\r\n\t\t\t\treturn this.#renderContentTab();\r\n\t\t\tcase 'destination':\r\n\t\t\t\treturn this.#renderDestinationTab();\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst canCreate = this.#getCanCreate();\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Create from Source\">\r\n\t\t\t\t${this.#renderTabs()}\r\n\r\n\t\t\t\t<div class=\"tab-content\">\r\n\t\t\t\t\t${this.#renderTabContent()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"close\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}\r\n\t\t\t\t\t@click=\"${this.#handleClose}\"></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"save\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_create')}\r\n\t\t\t\t\t?disabled=${!canCreate}\r\n\t\t\t\t\t@click=\"${this.#handleSave}\"></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t/* Navigation tabs */\r\n\t\t\tuui-tab[disabled] {\r\n\t\t\t\topacity: 0.5;\r\n\t\t\t\tcursor: not-allowed;\r\n\t\t\t}\r\n\r\n\t\t\t/* Tab content */\r\n\t\t\t.tab-content {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t/* Content editor tab */\r\n\t\t\t.content-editor {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t.content-editor uui-box {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.content-editor-intro {\r\n\t\t\t\tmargin: 0 0 var(--uui-size-space-4) 0;\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t}\r\n\r\n\t\t\t.section-card {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tbackground: var(--uui-color-surface);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.section-card-header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t\tbackground: var(--uui-color-surface-alt);\r\n\t\t\t}\r\n\r\n\t\t\t.section-card-label {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.section-card-body {\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t.section-card-actions {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: var(--uui-size-space-2);\r\n\t\t\t\tright: var(--uui-size-space-2);\r\n\t\t\t\topacity: 0;\r\n\t\t\t\ttransition: opacity 120ms ease;\r\n\t\t\t}\r\n\r\n\t\t\t.section-card:hover .section-card-actions {\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\r\n\t\t\t.section-card-content {\r\n\t\t\t\tpadding: var(--uui-size-space-4);\r\n\t\t\t\twhite-space: pre-wrap;\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tmax-height: 300px;\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t}\r\n\r\n\t\t\t/* Destination tab */\r\n\t\t\t.destination-value {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-status {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tmargin-top: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-2);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-status.extracting {\r\n\t\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-status.error {\r\n\t\t\t\tbackground-color: var(--uui-color-danger-emphasis);\r\n\t\t\t\tcolor: var(--uui-color-danger-contrast);\r\n\t\t\t}\r\n\r\n\t\t\t.extraction-status.success {\r\n\t\t\t\tbackground-color: var(--uui-color-positive-emphasis);\r\n\t\t\t\tcolor: var(--uui-color-positive-contrast);\r\n\t\t\t}\r\n\r\n\t\t\tuui-select {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.source-coming-soon {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tmargin-top: var(--uui-size-space-3);\r\n\t\t\t\tpadding: var(--uui-size-space-2);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tbackground-color: var(--uui-color-surface-alt);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UpDocModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'up-doc-modal': UpDocModalElement;\r\n\t}\r\n}\r\n"],"names":["_UpDocModalElement_instances","loadAvailableSourceTypes_fn","handleSourceTypeChange_fn","handleMediaChange_fn","extractFromSource_fn","handleSave_fn","handleClose_fn","renderSourceUI_fn","renderPdfSource_fn","renderMarkdownSource_fn","renderWebSource_fn","renderDocSource_fn","getSectionLabel_fn","hasExtractedContent_fn","handleTabClick_fn","renderExtractionStatus_fn","renderTabs_fn","renderSourceTab_fn","renderContentTab_fn","renderDestinationTab_fn","openSectionEditor_fn","copySection_fn","getCanCreate_fn","renderTabContent_fn","SECTION_LABELS","SOURCE_TYPE_LABELS","UpDocModalElement","UmbModalBaseElement","__privateAdd","__privateMethod","canCreate","html","blueprintId","_a","token","UMB_AUTH_CONTEXT","config","fetchConfig","err","e","newSourceType","selection","mediaUnique","result","extractSections","key","value","m","d","error","nothing","v","tab","hasContent","st","sections","_b","UmbTextStyles","css","__decorateClass","state","customElement","UpDocModalElement_default"],"mappings":"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"}